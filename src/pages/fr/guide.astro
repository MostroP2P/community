---
import Layout from '../../layouts/Layout.astro';
import Header from '../../components/Header.astro';
import Footer from '../../components/Footer.astro';
import '../../styles/guide.css';

const locale = 'fr' as const;
---

<Layout title="Guide de Configuration de N≈ìud ‚Äî Mostro Community" description="Guide complet pour faire tourner votre propre n≈ìud Mostro d'√©change P2P de Bitcoin." locale={locale}>
  <Header locale={locale} />

  <div class="container guide-layout">
    <nav class="toc">
      <div class="toc-title">Sur cette page</div>
      <ul class="toc-list">
        <li><a href="#what-is-mostro">1. Qu'est-ce que Mostro ?</a></li>
        <li class="toc-h3"><a href="#why-run">Pourquoi un n≈ìud ?</a></li>
        <li class="toc-h3"><a href="#how-it-works">Comment √ßa marche</a></li>
        <li><a href="#prerequisites">2. Pr√©requis</a></li>
        <li class="toc-h3"><a href="#vps">Serveur (VPS)</a></li>
        <li class="toc-h3"><a href="#lnd">N≈ìud Lightning (LND)</a></li>
        <li class="toc-h3"><a href="#liquidity">Liquidit√©</a></li>
        <li class="toc-h3"><a href="#nostr-keys">Cl√©s Nostr</a></li>
        <li class="toc-h3"><a href="#skill-level">Niveau technique</a></li>
        <li><a href="#setup">3. Installation pas √† pas</a></li>
        <li class="toc-h3"><a href="#common-steps">√âtapes communes</a></li>
        <li class="toc-h3"><a href="#option-a">Option A : Docker Hub</a></li>
        <li class="toc-h3"><a href="#option-b">Option B : Docker Build</a></li>
        <li class="toc-h3"><a href="#option-c">Option C : Natif</a></li>
        <li><a href="#configuration">4. Configuration</a></li>
        <li class="toc-h3"><a href="#cfg-nostr">Cl√©s Nostr</a></li>
        <li class="toc-h3"><a href="#fees">Frais</a></li>
        <li class="toc-h3"><a href="#limits">Limites</a></li>
        <li class="toc-h3"><a href="#profile">Profil du n≈ìud</a></li>
        <li class="toc-h3"><a href="#timeouts">D√©lais</a></li>
        <li class="toc-h3"><a href="#antispam">Anti-Spam</a></li>
        <li class="toc-h3"><a href="#rpc">RPC Admin</a></li>
        <li><a href="#operating">5. Exploitation du n≈ìud</a></li>
        <li class="toc-h3"><a href="#disputes">Litiges</a></li>
        <li class="toc-h3"><a href="#mostrix">Mostrix</a></li>
        <li class="toc-h3"><a href="#watchdog">mostro-watchdog</a></li>
        <li class="toc-h3"><a href="#monitoring">Surveillance</a></li>
        <li class="toc-h3"><a href="#updating">Mise √† jour</a></li>
        <li class="toc-h3"><a href="#backups">Sauvegardes</a></li>
        <li class="toc-h3"><a href="#activity">Activit√©</a></li>
        <li><a href="#costs">6. D√©tail des co√ªts</a></li>
        <li><a href="#faq">7. Questions fr√©quentes</a></li>
        <li><a href="#security">8. S√©curit√©</a></li>
        <li><a href="#troubleshooting">9. D√©pannage</a></li>
        <li><a href="#appendix">Annexe</a></li>
      </ul>
    </nav>

    <div class="toc-mobile">
      <button class="toc-toggle" id="toc-toggle">üìë Sommaire</button>
      <div class="toc-mobile-list" id="toc-mobile-list">
        <ul class="toc-list">
          <li><a href="#what-is-mostro">1. Qu'est-ce que Mostro ?</a></li>
          <li><a href="#prerequisites">2. Pr√©requis</a></li>
          <li><a href="#setup">3. Installation</a></li>
          <li><a href="#configuration">4. Configuration</a></li>
          <li><a href="#operating">5. Exploitation</a></li>
          <li><a href="#costs">6. Co√ªts</a></li>
          <li><a href="#faq">7. FAQ</a></li>
          <li><a href="#security">8. S√©curit√©</a></li>
          <li><a href="#troubleshooting">9. D√©pannage</a></li>
        </ul>
      </div>
    </div>

    <article class="guide-content">
      <h1>Faire Tourner Votre Propre N≈ìud Mostro</h1>
      <p class="guide-version">Mostro v0.16.3 ‚Äî Guide de la Communaut√© ¬∑ F√©vrier 2026</p>

      <!-- ===== SECTION 1 ===== -->
      <h2 id="what-is-mostro">1. Qu'est-ce que Mostro et pourquoi votre communaut√© devrait en faire tourner un ?</h2>

      <p>Mostro est un <strong>exchange peer-to-peer de Bitcoin</strong> qui permet aux gens d'acheter et de vendre du Bitcoin en utilisant des monnaies locales (dollars, euros, francs ‚Äî n'importe quelle devise) sans avoir √† fournir de pi√®ce d'identit√© (KYC). Pensez-y comme un march√© d√©centralis√© o√π acheteurs et vendeurs peuvent √©changer directement.</p>

      <p>Il fonctionne gr√¢ce √† deux technologies :</p>
      <ul>
        <li><strong>Lightning Network</strong> ‚Äî une couche de paiements rapides et peu co√ªteux pour Bitcoin (pensez-y comme la voie express de Bitcoin pour les petits paiements agiles)</li>
        <li><strong>Nostr</strong> ‚Äî un protocole de communication r√©sistant √† la censure (pensez-y comme un syst√®me de messagerie que personne ne peut √©teindre)</li>
      </ul>

      <p>Mostro agit comme un <strong>coordinateur de s√©questre</strong> ‚Äî il retient le Bitcoin du vendeur dans un ¬´ coffre-fort ¬ª temporaire (appel√© hold invoice) jusqu'√† ce que l'acheteur confirme avoir envoy√© le paiement en monnaie locale. Mostro ne contr√¥le jamais r√©ellement les fonds de quiconque ; il les retient bri√®vement pendant la transaction.</p>

      <h3 id="why-run">Pourquoi votre communaut√© voudrait-elle faire tourner un n≈ìud Mostro ?</h3>
      <ol>
        <li><strong>Revenus de frais</strong> ‚Äî Chaque transaction vous rapporte des frais (0.6% par d√©faut). Si votre communaut√© r√©alise 10 000 $ de transactions mensuelles, cela repr√©sente environ 60 $/mois en frais.</li>
        <li><strong>Trading P2P sans KYC</strong> ‚Äî Les membres de votre communaut√© peuvent acheter et vendre du Bitcoin sans fournir de pi√®ce d'identit√©. Particuli√®rement important dans les r√©gions aux monnaies instables ou aux r√©glementations restrictives.</li>
        <li><strong>Litiges dans votre langue</strong> ‚Äî Quand une transaction tourne mal, <em>votre</em> communaut√© la r√©sout, dans <em>votre</em> langue, en comprenant <em>vos</em> m√©thodes de paiement locales.</li>
        <li><strong>Ind√©pendance</strong> ‚Äî Aucune entreprise ne peut fermer votre exchange. Aucun gouvernement ne peut faire pression sur un op√©rateur unique pour le faire fermer.</li>
        <li><strong>Personnalisation</strong> ‚Äî Vous choisissez quelles devises supporter, quelles m√©thodes de paiement autoriser et quels frais facturer.</li>
      </ol>

      <h3 id="how-it-works">Comment fonctionne Mostro (Simplifi√©)</h3>

      <div class="flow-diagram">
        <div class="flow-step"><span class="step-num">1.</span> Alice veut VENDRE du Bitcoin pour 50 $ USD <span class="arrow">‚Üí</span> Elle cr√©e un ordre sur Mostro</div>
        <div class="flow-step"><span class="step-num">2.</span> Bob veut ACHETER du Bitcoin avec 50 $ USD <span class="arrow">‚Üí</span> Il voit l'ordre d'Alice et le prend</div>
        <div class="flow-step"><span class="step-num">3.</span> Mostro cr√©e un ¬´ coffre-fort ¬ª (hold invoice) <span class="arrow">‚Üí</span> Alice envoie ses Bitcoin dans le coffre-fort</div>
        <div class="flow-step"><span class="step-num">4.</span> Bob envoie 50 $ √† Alice par virement bancaire, Zelle, esp√®ces, etc. <span class="arrow">‚Üí</span> Bob appuie sur ¬´ Fiat Envoy√© ¬ª dans son app</div>
        <div class="flow-step"><span class="step-num">5.</span> Alice confirme qu'elle a re√ßu les 50 $ <span class="arrow">‚Üí</span> Elle appuie sur ¬´ Lib√©rer ¬ª</div>
        <div class="flow-step"><span class="step-num">6.</span> Mostro lib√®re les Bitcoin du coffre-fort vers Bob <span class="arrow">‚Üí</span> Transaction termin√©e ! ‚úì</div>
      </div>

      <p>Si quelque chose tourne mal (ex : Bob dit qu'il a pay√© mais Alice n'a pas re√ßu), l'une ou l'autre partie peut ouvrir un <strong>litige</strong>, et les arbitres d√©sign√©s de votre communaut√© enqu√™tent et r√©solvent le probl√®me.</p>

      <!-- ===== SECTION 2 ===== -->
      <h2 id="prerequisites">2. Pr√©requis ‚Äî Ce dont vous avez besoin avant de commencer</h2>

      <h3 id="vps">2.1 Un Serveur (VPS)</h3>

      <p>Un <strong>VPS</strong> (Serveur Priv√© Virtuel) est un ordinateur dans un centre de donn√©es qui fonctionne 24h/24 et 7j/7. Vous en louerez un pour h√©berger votre n≈ìud Mostro.</p>

      <p><strong>Sp√©cifications minimales :</strong></p>
      <table class="guide-table">
        <thead><tr><th>Ressource</th><th>Minimum</th><th>Recommand√©</th></tr></thead>
        <tbody>
          <tr><td>CPU</td><td>2 vCPUs (partag√©s)</td><td>2+ vCPUs</td></tr>
          <tr><td>RAM</td><td>2 Go</td><td>4 Go</td></tr>
          <tr><td>Stockage</td><td>60 Go SSD</td><td>100 Go SSD</td></tr>
          <tr><td>Bande passante</td><td>3 To/mois</td><td>3+ To/mois</td></tr>
          <tr><td>OS</td><td>Ubuntu 22.04+ LTS</td><td>Ubuntu 24.04 LTS</td></tr>
        </tbody>
      </table>

      <p><strong>Co√ªt mensuel estim√© :</strong> 10‚Äì24 $/mois.</p>

      <p><strong>Fournisseurs VPS populaires :</strong></p>
      <ul>
        <li><a href="https://www.hostinger.com/" target="_blank" rel="noopener noreferrer">Hostinger</a> ‚Äî √† partir d'environ 7 $/mois (prix promotionnel ; le renouvellement peut √™tre plus √©lev√©) (KVM 2 : 2 vCPU, 8 Go RAM, 100 Go NVMe, 8 To de bande passante) ¬∑ Accepte le Bitcoin</li>
        <li><a href="https://www.hetzner.com/" target="_blank" rel="noopener noreferrer">Hetzner</a> ‚Äî 3,49‚Äì8 ‚Ç¨/mois (CX23 √† partir de 3,49 ‚Ç¨, bon rapport qualit√©-prix, bas√© dans l'UE)</li>
        <li><a href="https://www.digitalocean.com/" target="_blank" rel="noopener noreferrer">Digital Ocean</a> ‚Äî 24 $/mois (4 Go RAM, 2 CPUs, 80 Go SSD) ou 32 $/mois (4 Go RAM, 2 Intel CPUs, 120 Go NVMe)</li>
        <li><a href="https://www.ovhcloud.com/" target="_blank" rel="noopener noreferrer">OVH</a> ‚Äî environ 6‚Äì12 $/mois</li>
        <li><a href="https://www.linode.com/" target="_blank" rel="noopener noreferrer">Linode/Akamai</a> ‚Äî 12 $/mois</li>
        <li><a href="https://www.lunanode.com/" target="_blank" rel="noopener noreferrer">Lunanode</a> ‚Äî Accepte les paiements en Bitcoin</li>
      </ul>

      <div class="callout tip">
        <div class="callout-title">üí° Conseil</div>
        <p>De nombreux fournisseurs de VPS acceptent les paiements en Bitcoin. Recherchez cette option si vous souhaitez rester coh√©rent avec la philosophie Bitcoin.</p>
      </div>

      <p>Vous devez √™tre √† l'aise pour vous connecter √† un serveur par SSH. Si vous ne l'avez jamais fait, cherchez un tutoriel ¬´ Se connecter en SSH √† un VPS ¬ª ‚Äî c'est plus simple qu'il n'y para√Æt.</p>

      <h3 id="lnd">2.2 Un N≈ìud Lightning Network (LND)</h3>

      <p>Lightning Network est un syst√®me ¬´ couche 2 ¬ª construit sur Bitcoin qui permet des paiements rapides et peu co√ªteux. Pour faire tourner Mostro, vous avez besoin d'un <strong>n≈ìud LND</strong> (Lightning Network Daemon) ‚Äî le logiciel Lightning sp√©cifique avec lequel Mostro fonctionne.</p>

      <p><strong>Vos options :</strong></p>
      <table class="guide-table">
        <thead><tr><th>Option</th><th>Difficult√©</th><th>Co√ªt</th><th>Notes</th></tr></thead>
        <tbody>
          <tr><td>Utiliser un n≈ìud LND existant</td><td><span class="badge badge-easy">Facile</span></td><td>Gratuit (si vous en avez un)</td><td>Id√©al si quelqu'un en a d√©j√† un</td></tr>
          <tr><td>Faire tourner LND sur le m√™me VPS</td><td><span class="badge badge-hard">Difficile</span></td><td>M√™me VPS + liquidit√©</td><td>N√©cessite un VPS avec 4 Go+ de RAM</td></tr>
          <tr><td>Solution n≈ìud-en-bo√Æte</td><td><span class="badge badge-medium">Moyen</span></td><td>200‚Äì600 $ + liquidit√©</td><td><a href="https://start9.com/" target="_blank" rel="noopener noreferrer">Start9</a>, <a href="https://umbrel.com/" target="_blank" rel="noopener noreferrer">Umbrel</a>, <a href="https://raspiblitz.org/" target="_blank" rel="noopener noreferrer">RaspiBlitz</a></td></tr>
          <tr><td>StartOS avec le paquet Mostro</td><td><span class="badge badge-easy">Plus facile</span></td><td>300‚Äì600 $ + liquidit√©</td><td>Start9 dispose d'un paquet Mostro en un clic</td></tr>
          <tr><td>Utiliser Voltage.cloud</td><td><span class="badge badge-easy">Facile</span></td><td>√Ä partir d'environ 20 $/mois + liquidit√©</td><td><a href="https://voltage.cloud/" target="_blank" rel="noopener noreferrer">Voltage</a> ‚Äî LND h√©berg√© avec infrastructure g√©r√©e</td></tr>
        </tbody>
      </table>

      <div class="callout important">
        <div class="callout-title">‚ö†Ô∏è Important</div>
        <p>Mostro requiert sp√©cifiquement <strong>LND</strong> (pas CLN/Core Lightning, pas Eclair, pas LDK). Assurez-vous que votre n≈ìud Lightning fait tourner LND.</p>
      </div>

      <p><strong>Ce dont vous avez besoin de votre n≈ìud LND :</strong></p>
      <ul>
        <li>Le fichier <code>tls.cert</code> (un certificat de s√©curit√©)</li>
        <li>Le fichier <code>admin.macaroon</code> (un jeton d'authentification)</li>
        <li>L'adresse gRPC (typiquement <code>https://127.0.0.1:10009</code> si sur la m√™me machine)</li>
      </ul>

      <h3 id="liquidity">2.3 Liquidit√© Lightning</h3>

      <p>Pour faciliter les transactions, votre n≈ìud Lightning a besoin de <strong>canaux</strong> avec du Bitcoin dedans. Pensez aux canaux Lightning comme des tunnels de paiement pr√©-financ√©s. Le Bitcoin dans ces canaux est votre ¬´ liquidit√© ¬ª.</p>

      <p><strong>Combien en faut-il ?</strong></p>
      <table class="guide-table">
        <thead><tr><th>Volume de trading vis√©</th><th>Liquidit√© sugg√©r√©e</th><th>BTC approximatif</th></tr></thead>
        <tbody>
          <tr><td>Petite communaut√© (quelques transactions/jour)</td><td>1‚Äì5 millions de sats</td><td>0.01‚Äì0.05 BTC</td></tr>
          <tr><td>Communaut√© moyenne</td><td>5‚Äì20 millions de sats</td><td>0.05‚Äì0.20 BTC</td></tr>
          <tr><td>Communaut√© active</td><td>20‚Äì100 millions de sats</td><td>0.20‚Äì1.0 BTC</td></tr>
        </tbody>
      </table>

      <div class="callout tip">
        <div class="callout-title">üí° Note sur la Liquidit√© Lightning</div>
        <p>Le Bitcoin dans vos canaux Lightning est bloqu√© <strong>onchain</strong> mais reste hautement d√©pensable via le Lightning Network. De nombreux services acceptent les paiements Lightning ‚Äî des caf√©s aux fournisseurs VPS ‚Äî rendant votre liquidit√© assez flexible pour un usage quotidien.</p>
      </div>

      <p><strong>Commencez petit, grandissez progressivement.</strong> Commencez avec suffisamment pour les besoins initiaux de votre communaut√© et surveillez les retours. Quand les traders signalent que les ordres √©chouent par manque de capacit√©, c'est votre signal pour en ajouter. √âcoutez votre communaut√©.</p>

      <p><strong>Obtenir de la liquidit√© :</strong></p>
      <ul>
        <li>Ouvrez des canaux vers des n≈ìuds bien connect√©s (utilisez <a href="https://lightningnetwork.plus/" target="_blank" rel="noopener noreferrer">Lightning Network+</a> ou <a href="https://amboss.space/" target="_blank" rel="noopener noreferrer">Amboss</a> pour trouver de bons pairs)</li>
        <li>Vous avez besoin de capacit√© <strong>sortante</strong> (pour payer les acheteurs) et de capacit√© <strong>entrante</strong> (pour recevoir des vendeurs)</li>
        <li>Obtenir de la liquidit√© entrante est g√©n√©ralement plus difficile ‚Äî envisagez <a href="https://lightning.engineering/loop/" target="_blank" rel="noopener noreferrer">Lightning Loop</a>, <a href="https://amboss.space/magma" target="_blank" rel="noopener noreferrer">Magma</a>, ou des services d'√©change de canaux</li>
      </ul>

      <h3 id="nostr-keys">2.4 Cl√©s Nostr</h3>

      <p>Votre n≈ìud Mostro a besoin de sa propre identit√© sur le r√©seau Nostr ‚Äî une paire de cl√©s cryptographiques avec une cl√© publique (l'adresse de votre n≈ìud) et une cl√© priv√©e (votre secret).</p>

      <div class="callout important">
        <div class="callout-title">‚ö†Ô∏è Important</div>
        <p>Ne r√©utilisez jamais des cl√©s Nostr entre instances de Mostro. Chaque n≈ìud a besoin de sa propre identit√© unique.</p>
      </div>

      <p><strong>G√©n√©rer des cl√©s Nostr s√©curis√©es localement avec rana :</strong></p>
      <pre><code># Installer Rust (si pas d√©j√† install√©)
curl --proto '=https' --tlsv1.2 -sSf https://sh.rustup.rs | sh
source ~/.cargo/env

# Installer rana - g√©n√©rateur local de cl√©s Nostr
cargo install rana

# G√©n√©rer une nouvelle paire de cl√©s (avec phrase mn√©monique de 12 mots)
rana --generate 12</code></pre>

      <p>Rana g√©n√©rera votre cl√© priv√©e (nsec), votre cl√© publique (npub) et une phrase mn√©monique de sauvegarde. <strong>Conservez le tout en lieu s√ªr !</strong> Note : lancer <code>rana</code> sans arguments d√©marre le minage PoW (difficult√© 10) qui peut prendre plusieurs minutes ‚Äî utilisez <code>--generate</code> pour une g√©n√©ration instantan√©e. Ne g√©n√©rez jamais de cl√©s importantes via des services en ligne.</p>

      <h3 id="skill-level">2.5 Niveau de connaissances techniques</h3>

      <table class="guide-table">
        <thead><tr><th>T√¢che</th><th>Difficult√©</th><th>Connaissances requises</th></tr></thead>
        <tbody>
          <tr><td>Louer un VPS</td><td><span class="badge badge-easy">Facile</span></td><td>Carte bancaire, navigation web basique</td></tr>
          <tr><td>Se connecter en SSH</td><td><span class="badge badge-easy">Facile</span></td><td>Suivre des instructions, taper des commandes</td></tr>
          <tr><td>Installer Docker</td><td><span class="badge badge-medium">Moyen</span></td><td>Copier-coller des commandes, d√©pannage basique</td></tr>
          <tr><td>Faire tourner Mostro (Docker)</td><td><span class="badge badge-medium">Moyen</span></td><td>√âditer des fichiers de configuration, comprendre les chemins</td></tr>
          <tr><td>Faire tourner Mostro (natif)</td><td><span class="badge badge-hard">Difficile</span></td><td>Administration Linux, compilation de logiciels, systemd</td></tr>
          <tr><td>Configurer LND depuis z√©ro</td><td><span class="badge badge-hard">Difficile</span></td><td>Connaissances significatives en Linux et r√©seaux</td></tr>
          <tr><td>G√©rer la liquidit√© Lightning</td><td><span class="badge badge-hard">Difficile</span></td><td>Comprendre l'√©conomie des canaux Lightning</td></tr>
        </tbody>
      </table>

      <p><strong>üí° Notre recommandation :</strong> Si votre communaut√© compte quelqu'un √† l'aise avec la ligne de commande Linux, il peut g√©rer l'installation avec Docker. La compilation native n√©cessite de l'exp√©rience en administration syst√®me. La configuration du n≈ìud Lightning est la partie la plus complexe ‚Äî envisagez de demander l'aide de quelqu'un d'exp√©riment√©, ou d'utiliser une solution n≈ìud-en-bo√Æte.</p>

      <!-- ===== SECTION 3 ===== -->
      <h2 id="setup">3. Installation Pas √† Pas</h2>

      <p>Toutes les options d'installation partagent les m√™mes premi√®res √©tapes. Choisissez ensuite l'option qui vous convient :</p>
      <ul>
        <li><strong>Option A (Docker Hub) :</strong> La plus rapide. Pas de compilation, pas de clonage. <strong>Recommand√©e pour la plupart.</strong></li>
        <li><strong>Option B (Docker Build) :</strong> Vous construisez l'image localement depuis le d√©p√¥t.</li>
        <li><strong>Option C (Compilation native) :</strong> Plus de contr√¥le, mieux pour les administrateurs exp√©riment√©s.</li>
      </ul>

      <p>Toutes supposent que vous avez d√©j√† : ‚úÖ Un VPS avec Ubuntu ¬∑ ‚úÖ Un acc√®s SSH ¬∑ ‚úÖ Un n≈ìud LND fonctionnel.</p>

      <h3 id="common-steps">√âtapes Communes (pour les 3 options)</h3>

      <h4>√âtape 1 : Connectez-vous √† votre VPS</h4>
      <pre><code>ssh root@VOTRE_ADRESSE_IP_VPS</code></pre>

      <h4>√âtape 2 : Mettez √† jour le syst√®me</h4>
      <pre><code># T√©l√©charger les derni√®res informations de paquets
apt update

# Installer toutes les mises √† jour disponibles
apt upgrade -y</code></pre>

      <h4>√âtape 3 : Installer Docker et Docker Compose</h4>
      <div class="callout tip">
        <div class="callout-title">üí° Note</div>
        <p>Docker est n√©cessaire pour les options A et B. Si vous compilez manuellement (Option C), vous pouvez sauter cette √©tape.</p>
      </div>
      <pre><code># Installer Docker avec le script officiel
curl -fsSL https://get.docker.com | sh

# V√©rifier que Docker est install√©
docker --version

# V√©rifier Docker Compose
docker compose version</code></pre>

      <h4>√âtape 4 : Installer les outils suppl√©mentaires</h4>
      <pre><code>apt install -y git make</code></pre>

      <p>‚úÖ <strong>√âtapes communes termin√©es.</strong> Choisissez maintenant votre option d'installation :</p>

      <h3 id="option-a">Option A : Docker Hub (La plus rapide ‚Äî Recommand√©e)</h3>
      <p>Lancez Mostro directement depuis Docker Hub sans cloner le d√©p√¥t ni compiler. Parfait pour les d√©ploiements sur VPS.</p>

      <h4>√âtape 5 : Cr√©er le r√©pertoire de configuration</h4>
      <pre><code>mkdir -p ~/mostro-config/lnd</code></pre>

      <h4>√âtape 6 : Obtenir le mod√®le de configuration</h4>
      <pre><code>curl -sL https://raw.githubusercontent.com/MostroP2P/mostro/v0.16.3/settings.tpl.toml \
  -o ~/mostro-config/settings.toml</code></pre>

      <h4>√âtape 7 : Copier les identifiants LND</h4>
      <pre><code>cp /chemin/vers/votre/tls.cert ~/mostro-config/lnd/tls.cert
cp /chemin/vers/votre/admin.macaroon ~/mostro-config/lnd/admin.macaroon</code></pre>

      <p>Si LND est sur la <strong>m√™me machine</strong>, les chemins typiques sont :</p>
      <ul>
        <li><code>/root/.lnd/tls.cert</code></li>
        <li><code>/root/.lnd/data/chain/bitcoin/mainnet/admin.macaroon</code></li>
      </ul>

      <h4>√âtape 8 : Modifier la configuration</h4>
      <pre><code>nano ~/mostro-config/settings.toml</code></pre>

      <p><strong>Modifications requises :</strong></p>
      <pre><code>[lightning]
lnd_cert_file = '/config/lnd/tls.cert'
lnd_macaroon_file = '/config/lnd/admin.macaroon'
lnd_grpc_host = 'https://host.docker.internal:10009'  # Si LND sur le m√™me VPS
# Ou utiliser 'https://VOTRE_IP_LND:10009' si LND sur un serveur diff√©rent

[database]
url = "sqlite:///config/mostro.db"

[nostr]
nsec_privkey = 'VOTRE_CLE_NSEC_ICI'
relays = ['wss://relay.mostro.network', 'wss://nos.lol']

[mostro]
fee = 0.006                    # 0.6% de frais par transaction
max_order_amount = 1000000     # Ordre maximum en sats
min_payment_amount = 100       # Ordre minimum en sats
fiat_currencies_accepted = ['USD', 'EUR']  # Vos devises</code></pre>

      <p>Enregistrer : <code>Ctrl+X</code>, puis <code>Y</code>, puis <code>Entr√©e</code>.</p>

      <h4>√âtape 9 : Ajuster les permissions</h4>
      <div class="callout important">
        <div class="callout-title">‚ö†Ô∏è Important</div>
        <p>√âvitez <code>chmod 777</code>. Utilisez des permissions minimales.</p>
      </div>
      <pre><code>sudo chown -R 1000:1000 ~/mostro-config
chmod 700 ~/mostro-config
chmod 600 ~/mostro-config/settings.toml
chmod 600 ~/mostro-config/lnd/admin.macaroon</code></pre>

      <h4>√âtape 10 : Lancer le conteneur</h4>
      <p><strong>Si LND est sur le m√™me VPS :</strong></p>
      <pre><code>docker run -d --name mostro \
  --restart unless-stopped \
  --add-host=host.docker.internal:host-gateway \
  -v ~/mostro-config:/config \
  mostrop2p/mostro:v0.16.3</code></pre>

      <p><strong>Si LND est sur un serveur diff√©rent :</strong></p>
      <pre><code>docker run -d --name mostro \
  --restart unless-stopped \
  -v ~/mostro-config:/config \
  mostrop2p/mostro:v0.16.3</code></pre>

      <h4>√âtape 11 : V√©rifier les logs</h4>
      <pre><code>docker logs -f mostro</code></pre>

      <p>Cherchez ces messages :</p>
      <ul>
        <li><code>Settings correctly loaded</code> ‚Äî La configuration est valide</li>
        <li><code>Connected to LND</code> ‚Äî Connexion Lightning r√©ussie</li>
        <li><code>Connected to relay</code> ‚Äî Relay Nostr √©tabli</li>
      </ul>

      <div class="callout tip">
        <div class="callout-title">üí° D√©pannage</div>
        <p>Si vous voyez <code>Permission denied (os error 13)</code>, r√©ajustez les permissions : <code>chown -R 1000:1000 ~/mostro-config</code> et red√©marrez : <code>docker restart mostro</code>.</p>
      </div>

      <p>üéâ <strong>F√©licitations !</strong> Si vous voyez des connexions r√©ussies dans les logs, votre n≈ìud Mostro fonctionne !</p>

      <h4>Mise √† jour (Docker Hub)</h4>
      <pre><code>export MOSTRO_TAG=v0.16.3
docker pull mostrop2p/mostro:$MOSTRO_TAG
docker stop mostro
docker rm mostro
docker run -d --name mostro \
  --restart unless-stopped \
  --add-host=host.docker.internal:host-gateway \
  -v ~/mostro-config:/config \
  mostrop2p/mostro:$MOSTRO_TAG</code></pre>

      <div class="callout security">
        <div class="callout-title">üîí Note de S√©curit√©</div>
        <p>Utilisez toujours un tag de version sp√©cifique (ex. <code>mostrop2p/mostro:v0.16.3</code>) au lieu de <code>:latest</code> pour contr√¥ler les d√©ploiements.</p>
      </div>

      <h3 id="option-b">Option B : Docker Build (Construire l'image localement)</h3>

      <h4>√âtape 5 : T√©l√©charger Mostro</h4>
      <pre><code>cd /opt
git clone https://github.com/MostroP2P/mostro.git
cd mostro</code></pre>

      <h4>√âtape 6 : Configurer les fichiers</h4>
      <pre><code>cd docker
mkdir -p config
cp ../settings.tpl.toml config/settings.toml</code></pre>

      <h4>√âtape 7 : Modifier le fichier de configuration</h4>
      <pre><code>nano config/settings.toml</code></pre>
      <p>Modifiez les m√™mes param√®tres que dans l'Option A, √âtape 8.</p>

      <h4>√âtape 8 : Construire l'image Docker</h4>
      <pre><code>cd ..
LND_CERT_FILE=/root/.lnd/tls.cert \
LND_MACAROON_FILE=/root/.lnd/data/chain/bitcoin/mainnet/admin.macaroon \
make docker-build</code></pre>

      <h4>√âtape 9 : Configurer le mot de passe de la base de donn√©es (Optionnel)</h4>
      <pre><code># Cr√©er le fichier docker/.env
echo "MOSTRO_DB_PASSWORD='VotreMotDePasseFort'" > docker/.env</code></pre>

      <h4>√âtape 10 : D√©marrer Mostro</h4>
      <pre><code>make docker-up

# V√©rifier
docker compose -f docker/compose.yml ps

# Voir les logs
docker compose -f docker/compose.yml logs -f mostro</code></pre>

      <p>üéâ <strong>F√©licitations !</strong> Si vous voyez des connexions r√©ussies, votre n≈ìud Mostro fonctionne !</p>

      <h3 id="option-c">Option C : Compilation Native (Pour op√©rateurs techniques)</h3>

      <h4>√âtape 5 : Installer Rust</h4>
      <pre><code>curl --proto '=https' --tlsv1.2 -sSf https://sh.rustup.rs | sh
source /root/.cargo/env
rustc --version
cargo --version</code></pre>

      <div class="callout important">
        <div class="callout-title">‚ö†Ô∏è Important</div>
        <p>N'installez PAS Rust via <code>apt install rustc</code>. Utilisez toujours <code>rustup</code>. Le paquet syst√®me est souvent obsol√®te.</p>
      </div>

      <h4>√âtape 6 : Installer les d√©pendances de compilation</h4>
      <pre><code>apt install -y cmake build-essential libsqlite3-dev libssl-dev \
  pkg-config git sqlite3 protobuf-compiler</code></pre>

      <h4>√âtape 7 : T√©l√©charger et compiler Mostro</h4>
      <pre><code>cd /opt
git clone https://github.com/MostroP2P/mostro.git
cd mostro
cargo build --release</code></pre>

      <div class="callout tip">
        <div class="callout-title">üí° Conseil</div>
        <p>Si la compilation √©choue par manque de RAM, ajoutez de l'espace swap :</p>
      </div>
      <pre><code>fallocate -l 2G /swapfile
chmod 600 /swapfile
mkswap /swapfile
swapon /swapfile</code></pre>

      <h4>√âtapes 8‚Äì10 : Installer, initialiser et nettoyer</h4>
      <pre><code>install target/release/mostrod /usr/local/bin
cargo install sqlx-cli --version 0.6.3
./init_db.sh
cargo clean  # √âconomise 2+ Go d'espace</code></pre>

      <h4>√âtapes 11‚Äì12 : Cr√©er un utilisateur et configurer</h4>
      <pre><code>adduser --disabled-login mostro
mkdir -p /opt/mostro
cp settings.tpl.toml /opt/mostro/settings.toml
nano /opt/mostro/settings.toml</code></pre>
      <p>Modifiez les m√™mes param√®tres que dans l'Option A, √âtape 8.</p>

      <h4>√âtapes 13‚Äì15 : Test, permissions et service systemd</h4>
      <pre><code># Test d'ex√©cution
/usr/local/bin/mostrod -d /opt/mostro

# D√©finir les permissions
chown -R mostro:mostro /opt/mostro</code></pre>

      <p>Cr√©er le service systemd :</p>
      <pre><code># /etc/systemd/system/mostro.service
[Unit]
Description=Mostro daemon
After=network.target

[Service]
Type=simple
User=mostro
WorkingDirectory=/home/mostro
Environment=RUST_LOG=info
ExecStart=/usr/local/bin/mostrod -d /opt/mostro
Restart=on-failure

[Install]
WantedBy=multi-user.target</code></pre>

      <pre><code>systemctl daemon-reload
systemctl enable mostro.service
systemctl start mostro.service
systemctl status mostro.service</code></pre>

      <p>üéâ <strong>F√©licitations !</strong> Votre n≈ìud Mostro tourne en tant que service syst√®me.</p>

      <!-- ===== SECTION 4 ===== -->
      <h2 id="configuration">4. Configuration en D√©tail</h2>

      <p>Le fichier <code>settings.toml</code> contr√¥le tout sur votre n≈ìud Mostro.</p>

      <h3 id="cfg-nostr">4.1 Cl√©s Nostr ‚Äî L'identit√© de votre n≈ìud</h3>
      <pre><code>[nostr]
nsec_privkey = 'VOTRE_CLE_NSEC'
relays = [
  'wss://relay.mostro.network',
  'wss://nos.lol',
  'wss://relay.nostr.band'
]</code></pre>

      <p><strong>Quels relays utiliser ?</strong></p>
      <ul>
        <li><code>wss://relay.mostro.network</code> ‚Äî Relay propre √† Mostro, recommand√©</li>
        <li><code>wss://nos.lol</code> ‚Äî Relay fiable et bien connect√©</li>
        <li>Ajoutez 3‚Äì5 relays pour la fiabilit√©. Plus de relays = meilleure disponibilit√© mais plus de bande passante.</li>
      </ul>

      <div class="callout tip">
        <div class="callout-title">üí° Conseil</div>
        <p>Vous pouvez aussi faire tourner votre propre relay Nostr √† c√¥t√© de Mostro (l'installation Docker en inclut un par d√©faut).</p>
      </div>

      <h3 id="fees">4.2 Frais ‚Äî Comment vous g√©n√©rez des revenus</h3>
      <pre><code>[mostro]
fee = 0.006
dev_fee_percentage = 0.30</code></pre>

      <p><strong>Frais de transaction</strong> (<code>fee</code>) : Pourcentage pr√©lev√© par transaction, r√©parti entre acheteur et vendeur.</p>
      <ul>
        <li><code>0.006</code> = 0.6% (chaque partie paie 0.3%)</li>
        <li><code>0.01</code> = 1.0% (chaque partie paie 0.5%)</li>
        <li><code>0</code> = gratuit (bon pour d√©velopper votre base d'utilisateurs)</li>
      </ul>

      <p><strong>Exemple :</strong> Sur une transaction de 100 000 sats avec <code>fee = 0.006</code> : L'acheteur paie 300 sats, le vendeur paie 300 sats, votre n≈ìud gagne 600 sats au total.</p>

      <p><strong>Frais de d√©veloppement</strong> (<code>dev_fee_percentage</code>) : Un pourcentage de <em>vos</em> revenus de frais qui va au d√©veloppement de Mostro.</p>
      <ul>
        <li><code>0.30</code> = 30% (par d√©faut) ‚Äî sur 600 sats, 180 vont au fonds de d√©veloppement</li>
        <li>Minimum : 10% (<code>0.10</code>), Maximum : 100% (<code>1.0</code>)</li>
        <li>Pay√© par votre n≈ìud sur ses revenus, non factur√© aux utilisateurs</li>
        <li>Tous les paiements sont v√©rifiables publiquement via des √©v√©nements Nostr (kind 8383)</li>
      </ul>

      <div class="callout important">
        <div class="callout-title">üìù Note</div>
        <p>D√©finir <code>dev_fee_percentage</code> en dessous de <code>0.10</code> emp√™chera Mostro de d√©marrer. Ce minimum assure un financement durable du d√©veloppement.</p>
      </div>

      <h3 id="limits">4.3 Limites d'ordres et devises</h3>
      <pre><code>[mostro]
max_order_amount = 1000000
min_payment_amount = 100
fiat_currencies_accepted = ['USD', 'EUR', 'ARS', 'CUP']</code></pre>

      <ul>
        <li><strong><code>max_order_amount</code> :</strong> Transaction maximale en satoshis. Configurez-la en fonction de la capacit√© de vos canaux Lightning.</li>
        <li><strong><code>min_payment_amount</code> :</strong> Transaction minimale en satoshis. 1 000 ou 10 000 est plus pratique que 100.</li>
        <li><strong><code>fiat_currencies_accepted</code> :</strong> Utilisez les <a href="https://en.wikipedia.org/wiki/ISO_4217" target="_blank" rel="noopener noreferrer">codes ISO 4217</a>. Un tableau vide <code>[]</code> accepte toutes les devises.</li>
      </ul>

      <h3 id="profile">4.4 Profil du n≈ìud (Optionnel mais recommand√©)</h3>
      <pre><code>[mostro]
name = "LatAm Mostro"
about = "Exchange P2P de Bitcoin pour l'Am√©rique latine. Support en espagnol."
picture = "https://exemple.com/votre-logo.png"
website = "https://site-de-votre-communaute.com"</code></pre>

      <p>Ceux-ci configurent le profil de votre Mostro sur Nostr (NIP-01 kind 0 metadata). Les clients affichent ces informations pour que les utilisateurs sachent sur quel Mostro ils √©changent.</p>

      <h3 id="timeouts">4.5 D√©lais et expiration</h3>
      <pre><code>[mostro]
expiration_hours = 24        # Dur√©e pendant laquelle un ordre reste ouvert
expiration_seconds = 900     # Temps pour compl√©ter (15 min)
hold_invoice_expiration_window = 300  # Validit√© de la hold invoice (5 min)</code></pre>

      <h3 id="antispam">4.6 Anti-Spam</h3>
      <pre><code>[mostro]
pow = 0  # 0 = d√©sactiv√© ; 10-20 = mod√©r√©. Commencez avec 0.</code></pre>

      <h3 id="rpc">4.7 Interface RPC Admin (Optionnel)</h3>
      <pre><code>[rpc]
enabled = false
listen_address = "127.0.0.1"
port = 50051</code></pre>

      <p>Activez-la pour les outils d'administration comme MostriX (interface de terminal) pour la r√©solution des litiges.</p>

      <div class="callout important">
        <div class="callout-title">‚ö†Ô∏è S√©curit√©</div>
        <p>Si vous activez RPC, gardez <code>listen_address</code> √† <code>"127.0.0.1"</code> (localhost uniquement). N'exposez jamais ceci √† internet.</p>
      </div>

      <!-- ===== SECTION 5 ===== -->
      <h2 id="operating">5. Exploitation de Votre N≈ìud Mostro</h2>

      <h3 id="disputes">5.1 Comment fonctionnent les litiges</h3>
      <p>Les litiges sont votre responsabilit√© op√©rationnelle la plus importante.</p>

      <p><strong>Quand les litiges surviennent-ils ?</strong></p>
      <ul>
        <li>L'acheteur dit qu'il a pay√©, le vendeur dit qu'il n'a pas re√ßu</li>
        <li>Le vendeur refuse de lib√©rer les Bitcoin apr√®s avoir re√ßu le paiement</li>
        <li>L'une des parties cesse de r√©pondre</li>
      </ul>

      <p><strong>Le processus de litige :</strong></p>
      <ol>
        <li><strong>L'utilisateur ouvre un litige</strong> ‚Äî L'une des parties clique sur ¬´ Litige ¬ª dans le client</li>
        <li><strong>Mostro marque l'ordre</strong> ‚Äî Le statut passe √† ¬´ Litige ¬ª, les fonds restent bloqu√©s</li>
        <li><strong>L'arbitre prend le cas</strong> ‚Äî Un admin assign√© √† votre n≈ìud enqu√™te</li>
        <li><strong>Investigation</strong> ‚Äî Communication avec les deux parties, demande de preuves</li>
        <li><strong>R√©solution</strong> ‚Äî L'arbitre d√©cide : lib√©rer vers l'acheteur, ou rembourser le vendeur</li>
      </ol>

      <div class="callout important">
        <div class="callout-title">‚ö†Ô∏è Important</div>
        <p>Choisissez vos arbitres avec soin. Ils ont le pouvoir de d√©cider o√π vont les fonds bloqu√©s. Choisissez des membres de confiance et impartiaux de la communaut√©. 2-3 arbitres sont recommand√©s.</p>
      </div>

      <h3 id="mostrix">5.2 Mostrix ‚Äî Votre outil d'administration</h3>
      <p>Mostrix est un client bas√© sur le terminal (TUI) pour la r√©solution des litiges. Si vous faites tourner un n≈ìud Mostro, vous avez besoin de Mostrix.</p>

      <pre><code># Installer les d√©pendances
sudo apt install -y cmake build-essential pkg-config

# Cloner et compiler
git clone https://github.com/MostroP2P/mostrix.git
cd mostrix
cargo build --release
cargo run</code></pre>

      <p>Configurer Mostrix en mode admin dans <code>~/.mostrix/settings.toml</code> :</p>
      <pre><code>mostro_pubkey = "VOTRE_PUBKEY_MOSTRO_HEX"
nsec_privkey = "nsec1votre_cle_personnelle"
admin_privkey = "nsec1votre_cle_admin"
relays = ["wss://relay.mostro.network", "wss://nos.lol"]
currencies = ["USD", "EUR", "ARS"]
user_mode = "admin"</code></pre>

      <h3 id="watchdog">5.3 mostro-watchdog ‚Äî Notifications de litiges sur Telegram</h3>
      <p><code>mostro-watchdog</code> surveille votre n≈ìud Mostro pour les litiges et envoie des alertes instantan√©es par Telegram. Essentiel pour des temps de r√©ponse rapides.</p>

      <pre><code>git clone https://github.com/MostroP2P/mostro-watchdog.git
cd mostro-watchdog
cargo build --release
cp config.example.toml config.toml
nano config.toml</code></pre>

      <pre><code>[mostro]
pubkey = "VOTRE_PUBKEY_MOSTRO"

[nostr]
relays = ["wss://relay.mostro.network", "wss://nos.lol"]

[telegram]
bot_token = "VOTRE_TOKEN_BOT"
chat_id = "VOTRE_CHAT_ID"</code></pre>

      <div class="callout tip">
        <div class="callout-title">üí° Conseil</div>
        <p>Faites tourner <code>mostro-watchdog</code> comme service systemd √† c√¥t√© de votre n≈ìud Mostro pour une surveillance 24h/24 et 7j/7.</p>
      </div>

      <h3 id="monitoring">5.4 Surveillance de la disponibilit√©</h3>

      <p>Votre n≈ìud doit fonctionner 24h/24 et 7j/7.</p>

      <pre><code># Natif
systemctl status mostro.service
journalctl -u mostro -f
journalctl -u mostro | grep -E "(error|warn|connected)" --ignore-case

# Docker Hub (Option A)
docker ps --filter name=mostro
docker logs -f mostro

# Docker Build (Option B)
docker compose -f /opt/mostro/docker/compose.yml ps
docker compose -f /opt/mostro/docker/compose.yml logs -f mostro</code></pre>

      <div class="callout tip">
        <div class="callout-title">üí° Conseil pro</div>
        <p>Configurez une surveillance simple avec <a href="https://uptimerobot.com/" target="_blank" rel="noopener noreferrer">UptimeRobot</a> (gratuit) ou une t√¢che cron qui vous alerte si Mostro tombe en panne.</p>
      </div>

      <h3 id="updating">5.5 Mettre √† jour Mostro</h3>

      <p><strong>Docker Hub :</strong></p>
      <pre><code>export MOSTRO_TAG=v0.16.3
docker stop mostro
docker rm mostro
docker pull mostrop2p/mostro:$MOSTRO_TAG
docker run -d --name mostro \
  --restart unless-stopped \
  --add-host=host.docker.internal:host-gateway \
  -v ~/mostro-config:/config \
  mostrop2p/mostro:$MOSTRO_TAG</code></pre>

      <p><strong>Docker Build :</strong></p>
      <pre><code>cd /opt/mostro
git pull origin main
make docker-build
make docker-down
make docker-up</code></pre>

      <p><strong>Natif :</strong></p>
      <pre><code>cd /opt/mostro
git pull origin main
cargo build --release
install target/release/mostrod /usr/local/bin
cargo clean
cargo install sqlx-cli --version 0.6.3
sqlx migrate run
systemctl restart mostro.service</code></pre>

      <div class="callout tip">
        <div class="callout-title">üí° Conseil</div>
        <p>Sauvegardez toujours votre base de donn√©es avant de mettre √† jour.</p>
      </div>

      <h3 id="backups">5.6 Sauvegardes</h3>

      <p>Fichiers critiques √† sauvegarder : <code>settings.toml</code> (contient votre cl√© priv√©e Nostr !) et <code>mostro.db</code> (historique des ordres, r√©putations).</p>

      <pre><code># Sauvegarde manuelle ‚Äî Docker Hub :
mkdir -p /root/mostro-backups
cp ~/mostro-config/settings.toml /root/mostro-backups/settings.toml.$(date +%Y%m%d)
cp ~/mostro-config/mostro.db /root/mostro-backups/mostro.db.$(date +%Y%m%d)

# Sauvegarde manuelle ‚Äî Natif :
cp /opt/mostro/settings.toml /root/mostro-backups/settings.toml.$(date +%Y%m%d)
cp /opt/mostro/mostro.db /root/mostro-backups/mostro.db.$(date +%Y%m%d)</code></pre>

      <p><strong>Sauvegarde quotidienne automatis√©e</strong> (ajouter au crontab avec <code>crontab -e</code>) :</p>
      <pre><code># Docker Hub (Option A) :
0 3 * * * mkdir -p /root/mostro-backups && cp ~/mostro-config/mostro.db /root/mostro-backups/mostro.db.$(date +\%Y\%m\%d) && cp ~/mostro-config/settings.toml /root/mostro-backups/settings.toml.$(date +\%Y\%m\%d)

# Natif (Option C) / Docker Build (Option B) :
0 3 * * * mkdir -p /root/mostro-backups && cp /opt/mostro/mostro.db /root/mostro-backups/mostro.db.$(date +\%Y\%m\%d) && cp /opt/mostro/settings.toml /root/mostro-backups/settings.toml.$(date +\%Y\%m\%d)</code></pre>

      <div class="callout important">
        <div class="callout-title">‚ö†Ô∏è Critique</div>
        <p>Votre <code>nsec_privkey</code> dans <code>settings.toml</code> EST l'identit√© de votre n≈ìud. Si vous la perdez, vous perdez votre r√©putation et tous les utilisateurs doivent se reconnecter √† une nouvelle identit√©. <strong>Conservez une copie hors ligne.</strong></p>
      </div>

      <h3 id="activity">5.7 V√©rifier l'activit√© des transactions</h3>

      <pre><code># Compter tous les ordres
sqlite3 /chemin/vers/mostro.db "SELECT COUNT(*) FROM orders;"

# Transactions r√©ussies r√©centes
sqlite3 /chemin/vers/mostro.db "SELECT id, fiat_code, fiat_amount, amount, fee, status, created_at FROM orders WHERE status = 'success' ORDER BY created_at DESC LIMIT 10;"

# Ordres en attente
sqlite3 /chemin/vers/mostro.db "SELECT id, fiat_code, fiat_amount, status, created_at FROM orders WHERE status = 'pending';"

# Revenus totaux en frais (frais du n≈ìud + dev_fee)
sqlite3 /chemin/vers/mostro.db "SELECT SUM(fee) as node_fees, SUM(dev_fee) as dev_fees, SUM(fee + dev_fee) as total_fees_sats FROM orders WHERE status = 'success';"</code></pre>

      <!-- ===== SECTION 6 ===== -->
      <h2 id="costs">6. D√©tail des Co√ªts</h2>

      <h3>Co√ªts op√©rationnels mensuels</h3>
      <table class="guide-table">
        <thead><tr><th>Poste</th><th>Co√ªt mensuel</th><th>Notes</th></tr></thead>
        <tbody>
          <tr><td>VPS (serveur)</td><td>10‚Äì24 $</td><td>D√©pend du fournisseur et des sp√©cifications</td></tr>
          <tr><td>Nom de domaine (optionnel)</td><td>1‚Äì2 $</td><td>Pour un site web/identit√©</td></tr>
          <tr><td>Frais onchain des canaux Lightning</td><td>Variable</td><td>Ouverture/fermeture de canaux</td></tr>
          <tr><td><strong>Total mensuel</strong></td><td><strong>11‚Äì26 $</strong></td><td>Hors liquidit√© Lightning</td></tr>
        </tbody>
      </table>

      <h3>Co√ªts uniques / de capital</h3>
      <table class="guide-table">
        <thead><tr><th>Poste</th><th>Co√ªt</th><th>Notes</th></tr></thead>
        <tbody>
          <tr><td>Liquidit√© Lightning</td><td>0.01‚Äì1.0+ BTC</td><td>Bloqu√© dans les canaux ; r√©cup√©r√© √† la fermeture</td></tr>
          <tr><td>Mat√©riel du n≈ìud (si auto-h√©berg√©)</td><td>0‚Äì600 $</td><td>Gratuit si VPS ; 300-600 $ pour Start9/Umbrel</td></tr>
          <tr><td>Temps de configuration</td><td>4‚Äì16 heures</td><td>Selon le niveau d'exp√©rience</td></tr>
        </tbody>
      </table>

      <h3>Potentiel de revenus</h3>
      <table class="guide-table">
        <thead><tr><th>Volume mensuel</th><th>Frais (0.6%)</th><th>Contribution dev (30%)</th><th>Revenu net</th></tr></thead>
        <tbody>
          <tr><td>1 000 $</td><td>~6 $</td><td>~1,80 $</td><td>~4,20 $</td></tr>
          <tr><td>10 000 $</td><td>~60 $</td><td>~18 $</td><td>~42 $</td></tr>
          <tr><td>50 000 $</td><td>~300 $</td><td>~90 $</td><td>~210 $</td></tr>
          <tr><td>100 000 $</td><td>~600 $</td><td>~180 $</td><td>~420 $</td></tr>
        </tbody>
      </table>

      <div class="callout important">
        <div class="callout-title">üìù R√©alit√©</div>
        <p>La plupart des n≈ìuds nouveaux mettent des mois √† construire du volume. N'attendez pas de rentabilit√© imm√©diate. La vraie valeur vient souvent du service rendu √† votre communaut√©, les frais √©tant un bonus.</p>
      </div>

      <h3>Engagement en temps</h3>
      <table class="guide-table">
        <thead><tr><th>T√¢che</th><th>Fr√©quence</th><th>Temps</th></tr></thead>
        <tbody>
          <tr><td>Surveillance (v√©rifier les logs, le statut)</td><td>Quotidien</td><td>5‚Äì10 min</td></tr>
          <tr><td>R√©solution de litiges</td><td>Selon les besoins</td><td>15‚Äì60 min par litige</td></tr>
          <tr><td>Mises √† jour</td><td>Mensuel</td><td>15‚Äì30 min</td></tr>
          <tr><td>Gestion de la liquidit√©</td><td>Hebdomadaire</td><td>15‚Äì30 min</td></tr>
          <tr><td><strong>Estimation hebdomadaire totale</strong></td><td></td><td><strong>1‚Äì3 heures</strong></td></tr>
        </tbody>
      </table>

      <!-- ===== SECTION 7 ===== -->
      <h2 id="faq">7. Questions Fr√©quentes</h2>

      <h3>Faut-il √™tre d√©veloppeur pour faire tourner un n≈ìud Mostro ?</h3>
      <p>Non, mais vous devez √™tre √† l'aise avec les op√©rations basiques en ligne de commande (taper des commandes, √©diter des fichiers texte). La voie Docker (Option A) est con√ßue pour √™tre accessible.</p>

      <h3>Puis-je faire tourner Mostro sur un Raspberry Pi ?</h3>
      <p>Techniquement oui (via Start9 ou similaire), mais ce n'est pas recommand√© pour la production en raison des limitations de CPU et de RAM. Un VPS est plus fiable.</p>

      <h3>Puis-je utiliser Core Lightning (CLN) au lieu de LND ?</h3>
      <p>Non. Mostro ne supporte actuellement que LND, car il d√©pend de l'impl√©mentation sp√©cifique des hold invoices de LND. Le support d'autres impl√©mentations pourrait arriver √† l'avenir.</p>

      <h3>Comment les utilisateurs se connectent-ils √† mon Mostro ?</h3>
      <p>Les utilisateurs ont besoin d'une application cliente Mostro (comme Mostro Mobile ou mostro-cli) et de la cl√© publique de votre Mostro (npub). Ils ajoutent votre npub dans leur client, et le client communique via les relays Nostr. Aucune connexion directe n'est n√©cessaire.</p>

      <h3>Puis-je faire tourner plusieurs instances de Mostro ?</h3>
      <p>Oui, mais chacune n√©cessite sa propre paire de cl√©s Nostr, son n≈ìud LND (ou au moins des canaux/liquidit√© s√©par√©s) et sa configuration.</p>

      <h3>Est-ce l√©gal ?</h3>
      <p>Cela d√©pend beaucoup de votre juridiction. Mostro est un logiciel d'√©change peer-to-peer. Dans certaines juridictions, op√©rer un exchange P2P peut n√©cessiter des licences. <strong>Consultez les r√©glementations locales et un conseiller juridique.</strong></p>

      <h3>Quelle bande passante utilise Mostro ?</h3>
      <p>Tr√®s peu ‚Äî principalement de petits √©v√©nements Nostr. Quelques Go par mois est typique m√™me avec un volume mod√©r√©.</p>

      <h3>Que se passe-t-il si mon n≈ìud se d√©connecte ?</h3>
      <p>Les ordres en attente finissent par expirer. Les transactions actives avec des fonds bloqu√©s continuent quand vous revenez en ligne. Si vous √™tes hors ligne trop longtemps, les utilisateurs peuvent perdre confiance.</p>

      <h3>Puis-je changer ma cl√© Nostr apr√®s ?</h3>
      <p>Vous pouvez, mais vous perdrez l'identit√© et la r√©putation de votre n≈ìud. Les utilisateurs le verront comme un nouveau Mostro. Traitez votre cl√© comme votre identit√© de marque.</p>

      <h3>Puis-je perdre de l'argent en faisant tourner un n≈ìud Mostro ?</h3>
      <p>Oui, c'est possible : les fonds dans les canaux Lightning pourraient √™tre √† risque √† cause de bugs (rare) ; la fermeture forc√©e de canaux pendant des p√©riodes de frais √©lev√©s peut √™tre co√ªteuse ; les co√ªts VPS sont continus.</p>

      <h3>La liquidit√© Lightning est-elle ¬´ √† risque ¬ª ?</h3>
      <p>Votre liquidit√© Lightning est la v√¥tre. Elle n'est pas en danger √† cause de Mostro en soi ‚Äî les hold invoices sont des blocages temporaires. Cependant, les risques standard du Lightning Network s'appliquent (fermetures forc√©es, canaux bloqu√©s, bugs).</p>

      <h3>Quand atteindrai-je le seuil de rentabilit√© ?</h3>
      <p>Cela d√©pend de vos co√ªts et du volume de transactions. Avec 20 $/mois de co√ªts et 0.6% de frais, vous avez besoin d'environ 5 000 $/mois en transactions pour couvrir les co√ªts (avant la contribution au d√©veloppement). La plupart des communaut√©s mettent 3‚Äì6 mois √† atteindre un volume significatif.</p>

      <!-- ===== SECTION 8 ===== -->
      <h2 id="security">8. Consid√©rations de S√©curit√©</h2>

      <div class="callout important">
        <div class="callout-title">‚ö†Ô∏è Avertissement ‚Äî logiciel en phase pr√©coce</div>
        <p><strong>Mostro est en phase pr√©coce de d√©veloppement.</strong> Bien que l'√©quipe travaille dur pour assurer la fiabilit√©, des bugs non d√©couverts peuvent exister ‚Äî y compris des bugs de s√©curit√© pouvant entra√Æner une perte de fonds. <strong>Les d√©veloppeurs ne sont pas responsables de toute perte d'argent due √† des bugs logiciels.</strong></p>
        <p>Mostro est open source et son code est ouvert aux audits. Nous encourageons les communaut√©s √† promouvoir et financer des audits de s√©curit√© ind√©pendants.</p>
        <p>Cela dit, <strong>le m√©canisme central de s√©questre utilisant les hold invoices Lightning a √©t√© √©prouv√© depuis 2021</strong>, quand @lnp2pBot a impl√©ment√© pour la premi√®re fois ce type de s√©questre. Des milliers de transactions ont √©t√© r√©alis√©es avec succ√®s.</p>
      </div>

      <h3>Op√©rer sous des r√©gimes autoritaires</h3>

      <p>Si vous op√©rez dans un pays avec un gouvernement autoritaire, <strong>la confidentialit√© n'est pas optionnelle ‚Äî c'est une exigence de s√©curit√©.</strong></p>

      <ol>
        <li><strong>Faites tourner votre n≈ìud Mostro derri√®re Tor et/ou un VPN.</strong> Cela masque l'IP de votre serveur vis-√†-vis des relays Nostr.</li>
        <li><strong>Si Tor/VPN n'est pas possible</strong> (courant dans les pays en d√©veloppement avec un internet lent), <strong>publiez uniquement des √©v√©nements sur des relays que vous poss√©dez ou en lesquels vous avez confiance.</strong></li>
        <li><strong>Soyez tr√®s prudent avec les relays que vous utilisez.</strong> √Ä l'avenir, les gouvernements pourraient cr√©er des relays Nostr sp√©cifiquement pour collecter des adresses IP.</li>
        <li><strong>Pensez √©galement √† la confidentialit√© de votre n≈ìud Lightning.</strong> Faire tourner LND derri√®re Tor est possible et recommand√© dans les environnements sensibles.</li>
      </ol>

      <div class="callout tip">
        <div class="callout-title">üí° Conseil</div>
        <p>La beaut√© de Mostro √©tant d√©centralis√© est que m√™me si un n≈ìud est arr√™t√©, les autres continuent de fonctionner. Mais la pr√©vention est toujours pr√©f√©rable √† la gu√©rison. Prenez la confidentialit√© au s√©rieux d√®s le premier jour.</p>
      </div>

      <!-- ===== SECTION 9 ===== -->
      <h2 id="troubleshooting">9. D√©pannage</h2>

      <h3>Mostro ne d√©marre pas</h3>

      <h4>¬´ Configuration error: dev_fee_percentage below minimum ¬ª</h4>
      <p>D√©finissez <code>dev_fee_percentage</code> √† au moins <code>0.10</code> dans settings.toml.</p>

      <h4>Fichier de configuration ou base de donn√©es introuvable</h4>
      <p>Assurez-vous que le flag <code>-d</code> pointe vers le r√©pertoire contenant <code>settings.toml</code>. Pour Docker Hub : v√©rifiez que <code>~/mostro-config/settings.toml</code> existe.</p>

      <h4>¬´ Failed to connect to LND ¬ª</h4>
      <ul>
        <li>V√©rifiez que LND tourne : <code>lncli getinfo</code></li>
        <li>V√©rifiez que <code>lnd_grpc_host</code> correspond √† l'adresse de votre LND</li>
        <li>V√©rifiez que les chemins de <code>tls.cert</code> et <code>admin.macaroon</code> sont corrects</li>
        <li>Docker + LND sur l'h√¥te : utilisez <code>host.docker.internal</code></li>
      </ul>

      <h3>Probl√®mes de connexion</h3>

      <h4>Mostro d√©marre mais ne se connecte pas aux relays</h4>
      <ul>
        <li>V√©rifiez les URLs des relays (doivent commencer par <code>wss://</code>)</li>
        <li>Assurez-vous que le pare-feu de votre VPS autorise les connexions sortantes sur le port 443</li>
        <li>Essayez avec diff√©rents relays ‚Äî certains peuvent √™tre temporairement en panne</li>
      </ul>

      <h3>Probl√®mes de transactions</h3>

      <h4>Les ordres n'apparaissent pas dans les clients</h4>
      <ul>
        <li>V√©rifiez les connexions aux relays dans les logs</li>
        <li>Assurez-vous que les clients utilisent les m√™mes relays que votre n≈ìud</li>
      </ul>

      <h4>Paiements √©chouant</h4>
      <ul>
        <li>V√©rifiez la liquidit√© : <code>lncli listchannels</code></li>
        <li>Assurez-vous d'avoir suffisamment de capacit√© sortante</li>
        <li>V√©rifiez le param√®tre <code>max_routing_fee</code></li>
      </ul>

      <h3>Probl√®mes de base de donn√©es</h3>

      <h4>Erreurs de base de donn√©es verrouill√©e</h4>
      <pre><code>ps aux | grep mostrod
# S'il y a plusieurs processus, supprimez les extras :
kill &lt;PID&gt;</code></pre>

      <h3>Obtenir de l'aide</h3>

      <ol>
        <li><strong>V√©rifiez les logs d'abord</strong> ‚Äî la plupart des erreurs expliquent ce qui a mal tourn√©</li>
        <li><strong>Telegram (D√©veloppeurs) :</strong> <a href="https://t.me/mostro_dev" target="_blank" rel="noopener noreferrer">@mostro_dev</a></li>
        <li><strong>Telegram (Communaut√©) :</strong> <a href="https://t.me/MostroP2P" target="_blank" rel="noopener noreferrer">@MostroP2P</a></li>
        <li><strong>GitHub Issues :</strong> <a href="https://github.com/MostroP2P/mostro/issues" target="_blank" rel="noopener noreferrer">github.com/MostroP2P/mostro/issues</a></li>
        <li><strong>DeepWiki :</strong> <a href="https://deepwiki.com/MostroP2P/mostro" target="_blank" rel="noopener noreferrer">deepwiki.com/MostroP2P/mostro</a></li>
      </ol>

      <p>Quand vous demandez de l'aide, incluez toujours : votre version de Mostro, les logs pertinents, et ce que vous avez d√©j√† essay√©.</p>

      <!-- ===== APPENDIX ===== -->
      <h2 id="appendix">Annexe : R√©f√©rence Rapide</h2>

      <h3>Emplacements importants des fichiers</h3>
      <table class="guide-table">
        <thead><tr><th>Fichier</th><th>Docker Hub</th><th>Natif</th></tr></thead>
        <tbody>
          <tr><td>Configuration</td><td><code>~/mostro-config/settings.toml</code></td><td><code>/opt/mostro/settings.toml</code></td></tr>
          <tr><td>Base de donn√©es</td><td><code>~/mostro-config/mostro.db</code></td><td><code>/opt/mostro/mostro.db</code></td></tr>
          <tr><td>Cert LND</td><td><code>~/mostro-config/lnd/tls.cert</code></td><td>Variable (voir config LND)</td></tr>
          <tr><td>Macaroon LND</td><td><code>~/mostro-config/lnd/admin.macaroon</code></td><td>Variable (voir config LND)</td></tr>
          <tr><td>Service</td><td>N/A</td><td><code>/etc/systemd/system/mostro.service</code></td></tr>
          <tr><td>Logs</td><td><code>docker logs -f mostro</code></td><td><code>journalctl -u mostro</code></td></tr>
        </tbody>
      </table>

      <h3>Commandes essentielles</h3>
      <pre><code># Docker
docker logs -f mostro         # Voir les logs
docker restart mostro          # Red√©marrer
docker stop mostro             # Arr√™ter

# Natif (systemd)
systemctl start mostro         # D√©marrer
systemctl stop mostro          # Arr√™ter
systemctl restart mostro       # Red√©marrer
systemctl status mostro        # Voir le statut
journalctl -u mostro -f        # Voir les logs

# Base de donn√©es
sqlite3 mostro.db "SELECT COUNT(*) FROM orders;"                           # Total des ordres
sqlite3 mostro.db "SELECT COUNT(*) FROM orders WHERE status='success';"    # Transactions r√©ussies
sqlite3 mostro.db "SELECT SUM(fee + dev_fee) FROM orders WHERE status='success';"  # Total des frais</code></pre>

      <h3>Configuration recommand√©e pour les nouveaux n≈ìuds</h3>
      <pre><code>[mostro]
fee = 0.006
max_order_amount = 500000
min_payment_amount = 1000
expiration_hours = 24
expiration_seconds = 900
pow = 0
dev_fee_percentage = 0.30
fiat_currencies_accepted = ['USD']  # Changez pour votre devise locale

[nostr]
relays = [
  'wss://relay.mostro.network',
  'wss://nos.lol',
  'wss://relay.nostr.band'
]</code></pre>

      <div style="text-align:center; margin-top:48px; padding:24px; border-top:1px solid var(--border);">
        <p>Ce guide est maintenu par la communaut√© Mostro. Vous avez trouv√© une erreur ou souhaitez l'am√©liorer ?<br>
        Les contributions sont les bienvenues sur <a href="https://github.com/MostroP2P/community" target="_blank" rel="noopener noreferrer">github.com/MostroP2P/community</a></p>
        <p style="color:var(--text-secondary); margin-top:12px;">Derni√®re mise √† jour : F√©vrier 2026 ¬∑ Mostro v0.16.3</p>
      </div>
    </article>
  </div>

  <Footer locale={locale} />
</Layout>

<style>
  .flow-diagram {
    background: rgba(140, 198, 63, 0.05);
    border: 1px solid rgba(140, 198, 63, 0.2);
    border-radius: 12px;
    padding: 24px;
    margin: 20px 0;
    font-family: monospace;
  }
  .flow-step {
    padding: 8px 0;
    line-height: 1.6;
  }
  .step-num {
    color: var(--accent);
    font-weight: 700;
    font-size: 1.1rem;
  }
  .arrow {
    color: var(--accent);
    font-weight: 700;
  }
  .badge {
    display: inline-block;
    padding: 2px 10px;
    border-radius: 12px;
    font-size: 0.8rem;
    font-weight: 600;
  }
  .badge-easy {
    background: rgba(76, 175, 80, 0.15);
    color: #2E7D32;
  }
  .badge-medium {
    background: rgba(255, 193, 7, 0.15);
    color: #7B5800;
  }
  .badge-hard {
    background: rgba(244, 67, 54, 0.15);
    color: #B71C1C;
  }
</style>

<script>
  document.getElementById('toc-toggle')?.addEventListener('click', () => {
    document.getElementById('toc-mobile-list')?.classList.toggle('open');
  });
</script>
