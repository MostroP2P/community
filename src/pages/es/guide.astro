---
import Layout from '../../layouts/Layout.astro';
import Header from '../../components/Header.astro';
import Footer from '../../components/Footer.astro';
import '../../styles/guide.css';

const locale = 'es' as const;
---

<Layout title="Gu√≠a de Configuraci√≥n de Nodo ‚Äî Mostro Community" description="Gu√≠a completa para ejecutar tu propio nodo Mostro P2P de intercambio de Bitcoin." locale={locale}>
  <Header locale={locale} />

  <div class="container guide-layout">
    <nav class="toc">
      <div class="toc-title">En esta p√°gina</div>
      <ul class="toc-list">
        <li><a href="#what-is-mostro">1. ¬øQu√© es Mostro?</a></li>
        <li class="toc-h3"><a href="#why-run">¬øPor qu√© un nodo?</a></li>
        <li class="toc-h3"><a href="#how-it-works">C√≥mo funciona</a></li>
        <li><a href="#prerequisites">2. Prerequisitos</a></li>
        <li class="toc-h3"><a href="#vps">Servidor (VPS)</a></li>
        <li class="toc-h3"><a href="#lnd">Nodo Lightning (LND)</a></li>
        <li class="toc-h3"><a href="#liquidity">Liquidez</a></li>
        <li class="toc-h3"><a href="#nostr-keys">Claves Nostr</a></li>
        <li class="toc-h3"><a href="#skill-level">Nivel t√©cnico</a></li>
        <li><a href="#setup">3. Instalaci√≥n paso a paso</a></li>
        <li class="toc-h3"><a href="#common-steps">Pasos comunes</a></li>
        <li class="toc-h3"><a href="#option-a">Opci√≥n A: Docker Hub</a></li>
        <li class="toc-h3"><a href="#option-b">Opci√≥n B: Docker Build</a></li>
        <li class="toc-h3"><a href="#option-c">Opci√≥n C: Nativo</a></li>
        <li><a href="#configuration">4. Configuraci√≥n</a></li>
        <li class="toc-h3"><a href="#cfg-nostr">Claves Nostr</a></li>
        <li class="toc-h3"><a href="#fees">Comisiones</a></li>
        <li class="toc-h3"><a href="#limits">L√≠mites</a></li>
        <li class="toc-h3"><a href="#profile">Perfil del nodo</a></li>
        <li class="toc-h3"><a href="#timeouts">Tiempos</a></li>
        <li class="toc-h3"><a href="#antispam">Anti-Spam</a></li>
        <li class="toc-h3"><a href="#rpc">RPC Admin</a></li>
        <li><a href="#operating">5. Operaci√≥n del nodo</a></li>
        <li class="toc-h3"><a href="#disputes">Disputas</a></li>
        <li class="toc-h3"><a href="#mostrix">Mostrix</a></li>
        <li class="toc-h3"><a href="#watchdog">mostro-watchdog</a></li>
        <li class="toc-h3"><a href="#monitoring">Monitoreo</a></li>
        <li class="toc-h3"><a href="#updating">Actualizaci√≥n</a></li>
        <li class="toc-h3"><a href="#backups">Respaldos</a></li>
        <li class="toc-h3"><a href="#activity">Actividad</a></li>
        <li><a href="#costs">6. Desglose de costos</a></li>
        <li><a href="#faq">7. Preguntas frecuentes</a></li>
        <li><a href="#security">8. Seguridad</a></li>
        <li><a href="#troubleshooting">9. Soluci√≥n de problemas</a></li>
        <li><a href="#appendix">Ap√©ndice</a></li>
      </ul>
    </nav>

    <div class="toc-mobile">
      <button class="toc-toggle" id="toc-toggle">üìë √çndice</button>
      <div class="toc-mobile-list" id="toc-mobile-list">
        <ul class="toc-list">
          <li><a href="#what-is-mostro">1. ¬øQu√© es Mostro?</a></li>
          <li><a href="#prerequisites">2. Prerequisitos</a></li>
          <li><a href="#setup">3. Instalaci√≥n</a></li>
          <li><a href="#configuration">4. Configuraci√≥n</a></li>
          <li><a href="#operating">5. Operaci√≥n</a></li>
          <li><a href="#costs">6. Costos</a></li>
          <li><a href="#faq">7. FAQ</a></li>
          <li><a href="#security">8. Seguridad</a></li>
          <li><a href="#troubleshooting">9. Problemas</a></li>
        </ul>
      </div>
    </div>

    <article class="guide-content">
      <h1>Ejecutando Tu Propio Nodo Mostro</h1>
      <p class="guide-version">Mostro v0.16.3 ‚Äî Gu√≠a de la Comunidad ¬∑ Febrero 2026</p>

      <!-- ===== SECTION 1 ===== -->
      <h2 id="what-is-mostro">1. ¬øQu√© es Mostro y por qu√© tu comunidad deber√≠a ejecutar uno?</h2>

      <p>Mostro es un <strong>exchange peer-to-peer de Bitcoin</strong> que permite a las personas comprar y vender Bitcoin usando monedas locales (d√≥lares, euros, pesos ‚Äî cualquier moneda) sin necesidad de proporcionar documentos de identidad (KYC). Piensa en √©l como un mercado descentralizado donde compradores y vendedores pueden comerciar directamente.</p>

      <p>Funciona usando dos tecnolog√≠as:</p>
      <ul>
        <li><strong>Lightning Network</strong> ‚Äî una capa de pagos r√°pidos y de bajo costo para Bitcoin (piensa en ella como la v√≠a r√°pida de Bitcoin para pagos peque√±os y √°giles)</li>
        <li><strong>Nostr</strong> ‚Äî un protocolo de comunicaci√≥n resistente a la censura (piensa en √©l como un sistema de mensajer√≠a que nadie puede apagar)</li>
      </ul>

      <p>Mostro act√∫a como un <strong>coordinador de custodia</strong> ‚Äî retiene los Bitcoin del vendedor en una "caja fuerte" temporal (llamada hold invoice) hasta que el comprador confirma que ha enviado el pago en moneda local. Mostro nunca controla realmente los fondos de nadie; solo los retiene brevemente durante la operaci√≥n.</p>

      <h3 id="why-run">¬øPor qu√© tu comunidad querr√≠a ejecutar un nodo Mostro?</h3>
      <ol>
        <li><strong>Ingresos por comisiones</strong> ‚Äî Cada operaci√≥n te genera una comisi√≥n (0.6% por defecto). Si tu comunidad hace $10,000 en operaciones mensuales, son ~$60/mes en comisiones.</li>
        <li><strong>Trading P2P sin KYC</strong> ‚Äî Los miembros de tu comunidad pueden comprar y vender Bitcoin sin proporcionar documentos de identidad. Especialmente importante en regiones con monedas inestables o regulaciones restrictivas.</li>
        <li><strong>Disputas en tu idioma</strong> ‚Äî Cuando una operaci√≥n sale mal, <em>tu</em> comunidad la resuelve, en <em>tu</em> idioma, entendiendo <em>tus</em> m√©todos de pago locales.</li>
        <li><strong>Independencia</strong> ‚Äî Ninguna empresa puede cerrar tu exchange. Ning√∫n gobierno puede presionar a un √∫nico operador para cerrarlo.</li>
        <li><strong>Personalizaci√≥n</strong> ‚Äî T√∫ eliges qu√© monedas soportar, qu√© m√©todos de pago permitir y qu√© comisiones cobrar.</li>
      </ol>

      <h3 id="how-it-works">C√≥mo funciona Mostro (Simplificado)</h3>

      <div class="flow-diagram">
        <div class="flow-step"><span class="step-num">1.</span> Alice quiere VENDER Bitcoin por $50 USD <span class="arrow">‚Üí</span> Crea una orden en Mostro</div>
        <div class="flow-step"><span class="step-num">2.</span> Bob quiere COMPRAR Bitcoin con $50 USD <span class="arrow">‚Üí</span> Ve la orden de Alice y la toma</div>
        <div class="flow-step"><span class="step-num">3.</span> Mostro crea una "caja fuerte" (hold invoice) <span class="arrow">‚Üí</span> Alice env√≠a sus Bitcoin a la caja fuerte</div>
        <div class="flow-step"><span class="step-num">4.</span> Bob env√≠a $50 a Alice por transferencia bancaria, Zelle, efectivo, etc. <span class="arrow">‚Üí</span> Bob presiona "Fiat Enviado" en su app</div>
        <div class="flow-step"><span class="step-num">5.</span> Alice confirma que recibi√≥ los $50 <span class="arrow">‚Üí</span> Presiona "Liberar"</div>
        <div class="flow-step"><span class="step-num">6.</span> Mostro libera los Bitcoin de la caja fuerte a Bob <span class="arrow">‚Üí</span> ¬°Operaci√≥n completada! ‚úì</div>
      </div>

      <p>Si algo sale mal (ej: Bob dice que pag√≥ pero Alice no lo recibi√≥), cualquiera de las partes puede abrir una <strong>disputa</strong>, y los √°rbitros asignados de tu comunidad investigan y resuelven.</p>

      <!-- ===== SECTION 2 ===== -->
      <h2 id="prerequisites">2. Prerequisitos ‚Äî Lo que necesitas antes de empezar</h2>

      <h3 id="vps">2.1 Un Servidor (VPS)</h3>

      <p>Un <strong>VPS</strong> (Servidor Virtual Privado) es una computadora en un centro de datos que funciona 24/7. Alquilar√°s uno para alojar tu nodo Mostro.</p>

      <p><strong>Especificaciones m√≠nimas:</strong></p>
      <table class="guide-table">
        <thead><tr><th>Recurso</th><th>M√≠nimo</th><th>Recomendado</th></tr></thead>
        <tbody>
          <tr><td>CPU</td><td>2 vCPUs (compartidos)</td><td>2+ vCPUs</td></tr>
          <tr><td>RAM</td><td>2 GB</td><td>4 GB</td></tr>
          <tr><td>Almacenamiento</td><td>60 GB SSD</td><td>100 GB SSD</td></tr>
          <tr><td>Ancho de banda</td><td>3 TB/mes</td><td>3+ TB/mes</td></tr>
          <tr><td>SO</td><td>Ubuntu 22.04+ LTS</td><td>Ubuntu 24.04 LTS</td></tr>
        </tbody>
      </table>

      <p><strong>Costo mensual estimado:</strong> $10‚Äì$24/mes.</p>

      <p><strong>Proveedores populares de VPS:</strong></p>
      <ul>
        <li><a href="https://www.hostinger.com/" target="_blank" rel="noopener noreferrer">Hostinger</a> ‚Äî desde ~$7/mes (precio promocional; la renovaci√≥n puede ser mayor) (KVM 2: 2 vCPU, 8GB RAM, 100GB NVMe, 8TB bandwidth) ¬∑ Acepta Bitcoin</li>
        <li><a href="https://www.hetzner.com/" target="_blank" rel="noopener noreferrer">Hetzner</a> ‚Äî ‚Ç¨3.49-8/mes (CX23 desde ‚Ç¨3.49, buena relaci√≥n calidad-precio, con base en la UE)</li>
        <li><a href="https://www.digitalocean.com/" target="_blank" rel="noopener noreferrer">Digital Ocean</a> ‚Äî $24/mes (4GB RAM, 2 CPUs, 80GB SSD) o $32/mes (4GB RAM, 2 Intel CPUs, 120GB NVMe)</li>
        <li><a href="https://www.ovhcloud.com/" target="_blank" rel="noopener noreferrer">OVH</a> ‚Äî ~$6-12/mes</li>
        <li><a href="https://www.linode.com/" target="_blank" rel="noopener noreferrer">Linode/Akamai</a> ‚Äî $12/mes</li>
        <li><a href="https://www.lunanode.com/" target="_blank" rel="noopener noreferrer">Lunanode</a> ‚Äî Acepta pagos en Bitcoin</li>
      </ul>

      <div class="callout tip">
        <div class="callout-title">üí° Consejo</div>
        <p>Muchos proveedores de VPS aceptan pagos en Bitcoin. Busca esa opci√≥n si quieres mantener coherencia con la filosof√≠a de Bitcoin.</p>
      </div>

      <p>Necesitas sentirte c√≥modo conect√°ndote a un servidor por SSH. Si nunca lo has hecho, busca un tutorial sobre "Conectarse por SSH a un VPS" ‚Äî es m√°s simple de lo que parece.</p>

      <h3 id="lnd">2.2 Un Nodo Lightning Network (LND)</h3>

      <p>Lightning Network es un sistema "capa 2" construido sobre Bitcoin que permite pagos r√°pidos y baratos. Para ejecutar Mostro, necesitas un <strong>nodo LND</strong> (Lightning Network Daemon) ‚Äî el software Lightning espec√≠fico con el que Mostro trabaja.</p>

      <p><strong>Tus opciones:</strong></p>
      <table class="guide-table">
        <thead><tr><th>Opci√≥n</th><th>Dificultad</th><th>Costo</th><th>Notas</th></tr></thead>
        <tbody>
          <tr><td>Usar un nodo LND existente</td><td><span class="badge badge-easy">F√°cil</span></td><td>Gratis (si tienes uno)</td><td>Mejor si alguien ya tiene uno</td></tr>
          <tr><td>Ejecutar LND en el mismo VPS</td><td><span class="badge badge-hard">Dif√≠cil</span></td><td>Mismo VPS + liquidez</td><td>Requiere VPS con 4GB+ RAM</td></tr>
          <tr><td>Soluci√≥n nodo-en-caja</td><td><span class="badge badge-medium">Medio</span></td><td>$200-600 + liquidez</td><td><a href="https://start9.com/" target="_blank" rel="noopener noreferrer">Start9</a>, <a href="https://umbrel.com/" target="_blank" rel="noopener noreferrer">Umbrel</a>, <a href="https://raspiblitz.org/" target="_blank" rel="noopener noreferrer">RaspiBlitz</a></td></tr>
          <tr><td>StartOS con paquete Mostro</td><td><span class="badge badge-easy">M√°s f√°cil</span></td><td>$300-600 + liquidez</td><td>Start9 tiene un paquete Mostro de un clic</td></tr>
          <tr><td>Usar Voltage.cloud</td><td><span class="badge badge-easy">F√°cil</span></td><td>Desde ~$20/mes + liquidez</td><td><a href="https://voltage.cloud/" target="_blank" rel="noopener noreferrer">Voltage</a> ‚Äî LND alojado con infraestructura administrada</td></tr>
        </tbody>
      </table>

      <div class="callout important">
        <div class="callout-title">‚ö†Ô∏è Importante</div>
        <p>Mostro requiere espec√≠ficamente <strong>LND</strong> (no CLN/Core Lightning, no Eclair, no LDK). Aseg√∫rate de que tu nodo Lightning ejecute LND.</p>
      </div>

      <p><strong>Lo que necesitas de tu nodo LND:</strong></p>
      <ul>
        <li>El archivo <code>tls.cert</code> (un certificado de seguridad)</li>
        <li>El archivo <code>admin.macaroon</code> (un token de autenticaci√≥n)</li>
        <li>La direcci√≥n gRPC (t√≠picamente <code>https://127.0.0.1:10009</code> si est√° en la misma m√°quina)</li>
      </ul>

      <h3 id="liquidity">2.3 Liquidez Lightning</h3>

      <p>Para facilitar operaciones, tu nodo Lightning necesita <strong>canales</strong> con Bitcoin en ellos. Piensa en los canales Lightning como t√∫neles de pago pre-financiados. El Bitcoin dentro de estos canales es tu "liquidez".</p>

      <p><strong>¬øCu√°nta necesitas?</strong></p>
      <table class="guide-table">
        <thead><tr><th>Volumen de trading objetivo</th><th>Liquidez sugerida</th><th>BTC aproximado</th></tr></thead>
        <tbody>
          <tr><td>Comunidad peque√±a (pocas operaciones/d√≠a)</td><td>1‚Äì5 millones de sats</td><td>0.01‚Äì0.05 BTC</td></tr>
          <tr><td>Comunidad mediana</td><td>5‚Äì20 millones de sats</td><td>0.05‚Äì0.20 BTC</td></tr>
          <tr><td>Comunidad activa</td><td>20‚Äì100 millones de sats</td><td>0.20‚Äì1.0 BTC</td></tr>
        </tbody>
      </table>

      <div class="callout tip">
        <div class="callout-title">üí° Nota sobre Liquidez Lightning</div>
        <p>El Bitcoin en tus canales Lightning est√° bloqueado <strong>onchain</strong> pero sigue siendo altamente gastable v√≠a Lightning Network. Muchos servicios aceptan pagos Lightning ‚Äî desde cafeter√≠as hasta proveedores VPS ‚Äî haciendo tu liquidez bastante flexible para uso cotidiano.</p>
      </div>

      <p><strong>Empieza peque√±o, crece incrementalmente.</strong> Comienza con lo suficiente para las necesidades iniciales de tu comunidad y monitorea el feedback. Cuando los traders reporten que las √≥rdenes fallan por capacidad insuficiente, esa es tu se√±al para agregar m√°s. Escucha a tu comunidad.</p>

      <p><strong>Obteniendo liquidez:</strong></p>
      <ul>
        <li>Abre canales a nodos bien conectados (usa <a href="https://lightningnetwork.plus/" target="_blank" rel="noopener noreferrer">Lightning Network+</a> o <a href="https://amboss.space/" target="_blank" rel="noopener noreferrer">Amboss</a> para encontrar buenos pares)</li>
        <li>Necesitas capacidad <strong>saliente</strong> (para pagar a compradores) y capacidad <strong>entrante</strong> (para recibir de vendedores)</li>
        <li>Obtener liquidez entrante suele ser m√°s dif√≠cil ‚Äî considera <a href="https://lightning.engineering/loop/" target="_blank" rel="noopener noreferrer">Lightning Loop</a>, <a href="https://amboss.space/magma" target="_blank" rel="noopener noreferrer">Magma</a>, o servicios de intercambio de canales</li>
      </ul>

      <h3 id="nostr-keys">2.4 Claves Nostr</h3>

      <p>Tu nodo Mostro necesita su propia identidad en la red Nostr ‚Äî un par de claves criptogr√°ficas con una clave p√∫blica (la direcci√≥n de tu nodo) y una clave privada (tu secreto).</p>

      <div class="callout important">
        <div class="callout-title">‚ö†Ô∏è Importante</div>
        <p>Nunca reutilices claves Nostr entre instancias de Mostro. Cada nodo necesita su propia identidad √∫nica.</p>
      </div>

      <p><strong>Generando claves Nostr seguras localmente con rana:</strong></p>
      <pre><code># Instalar Rust (si no est√° instalado)
curl --proto '=https' --tlsv1.2 -sSf https://sh.rustup.rs | sh
source ~/.cargo/env

# Instalar rana - generador local de claves Nostr
cargo install rana

# Generar un nuevo par de claves (con frase semilla de 12 palabras)
rana --generate 12</code></pre>

      <p>Rana generar√° tu clave privada (nsec), tu clave p√∫blica (npub) y una frase semilla de respaldo. <strong>¬°Guarda todo de forma segura!</strong> Nota: ejecutar <code>rana</code> sin argumentos inicia miner√≠a PoW (dificultad 10) que puede tardar minutos ‚Äî usa <code>--generate</code> para generaci√≥n instant√°nea. Nunca generes claves importantes usando servicios online.</p>

      <h3 id="skill-level">2.5 Nivel de conocimiento t√©cnico</h3>

      <table class="guide-table">
        <thead><tr><th>Tarea</th><th>Dificultad</th><th>Conocimientos necesarios</th></tr></thead>
        <tbody>
          <tr><td>Alquilar un VPS</td><td><span class="badge badge-easy">F√°cil</span></td><td>Tarjeta de cr√©dito, navegaci√≥n web b√°sica</td></tr>
          <tr><td>Conectarse por SSH</td><td><span class="badge badge-easy">F√°cil</span></td><td>Seguir instrucciones, escribir comandos</td></tr>
          <tr><td>Instalar Docker</td><td><span class="badge badge-medium">Medio</span></td><td>Copiar y pegar comandos, soluci√≥n b√°sica de problemas</td></tr>
          <tr><td>Ejecutar Mostro (Docker)</td><td><span class="badge badge-medium">Medio</span></td><td>Editar archivos de configuraci√≥n, entender rutas</td></tr>
          <tr><td>Ejecutar Mostro (nativo)</td><td><span class="badge badge-hard">Dif√≠cil</span></td><td>Administraci√≥n Linux, compilaci√≥n de software, systemd</td></tr>
          <tr><td>Configurar LND desde cero</td><td><span class="badge badge-hard">Dif√≠cil</span></td><td>Conocimiento significativo de Linux y redes</td></tr>
          <tr><td>Gestionar liquidez Lightning</td><td><span class="badge badge-hard">Dif√≠cil</span></td><td>Entender la econom√≠a de canales Lightning</td></tr>
        </tbody>
      </table>

      <p><strong>üí° Nuestra recomendaci√≥n:</strong> Si tu comunidad tiene a alguien c√≥modo con la l√≠nea de comandos de Linux, puede manejar la instalaci√≥n con Docker. La compilaci√≥n nativa requiere experiencia en administraci√≥n de sistemas. La configuraci√≥n del nodo Lightning es la parte m√°s compleja ‚Äî considera pedir ayuda a alguien experimentado, o usar una soluci√≥n nodo-en-caja.</p>

      <!-- ===== SECTION 3 ===== -->
      <h2 id="setup">3. Instalaci√≥n Paso a Paso</h2>

      <p>Todas las opciones de instalaci√≥n comparten los mismos primeros pasos. Luego elige la opci√≥n que prefieras:</p>
      <ul>
        <li><strong>Opci√≥n A (Docker Hub):</strong> La m√°s r√°pida. Sin compilar, sin clonar. <strong>Recomendada para la mayor√≠a.</strong></li>
        <li><strong>Opci√≥n B (Docker Build):</strong> Construyes la imagen localmente desde el repositorio.</li>
        <li><strong>Opci√≥n C (Compilaci√≥n nativa):</strong> M√°s control, mejor para sysadmins experimentados.</li>
      </ul>

      <p>Todas asumen que ya tienes: ‚úÖ Un VPS con Ubuntu ¬∑ ‚úÖ Acceso SSH ¬∑ ‚úÖ Un nodo LND funcionando.</p>

      <h3 id="common-steps">Pasos Comunes (para las 3 opciones)</h3>

      <h4>Paso 1: Con√©ctate a tu VPS</h4>
      <pre><code>ssh root@TU_DIRECCION_IP_DEL_VPS</code></pre>

      <h4>Paso 2: Actualiza el sistema</h4>
      <pre><code># Descargar la informaci√≥n m√°s reciente de paquetes
apt update

# Instalar todas las actualizaciones disponibles
apt upgrade -y</code></pre>

      <h4>Paso 3: Instalar Docker y Docker Compose</h4>
      <div class="callout tip">
        <div class="callout-title">üí° Nota</div>
        <p>Docker es necesario para las opciones A y B. Si vas a compilar manualmente (Opci√≥n C), puedes saltar este paso.</p>
      </div>
      <pre><code># Instalar Docker con el script oficial
curl -fsSL https://get.docker.com | sh

# Verificar que Docker est√° instalado
docker --version

# Verificar Docker Compose
docker compose version</code></pre>

      <h4>Paso 4: Instalar herramientas adicionales</h4>
      <pre><code>apt install -y git make</code></pre>

      <p>‚úÖ <strong>Pasos comunes completados.</strong> Ahora elige tu opci√≥n de instalaci√≥n:</p>

      <h3 id="option-a">Opci√≥n A: Docker Hub (La m√°s r√°pida ‚Äî Recomendada)</h3>
      <p>Ejecuta Mostro directamente desde Docker Hub sin clonar el repositorio ni compilar. Perfecto para deployments en VPS.</p>

      <h4>Paso 5: Crear directorio de configuraci√≥n</h4>
      <pre><code>mkdir -p ~/mostro-config/lnd</code></pre>

      <h4>Paso 6: Obtener el template de configuraci√≥n</h4>
      <pre><code>curl -sL https://raw.githubusercontent.com/MostroP2P/mostro/v0.16.3/settings.tpl.toml \
  -o ~/mostro-config/settings.toml</code></pre>

      <h4>Paso 7: Copiar credenciales LND</h4>
      <pre><code>cp /ruta/a/tu/tls.cert ~/mostro-config/lnd/tls.cert
cp /ruta/a/tu/admin.macaroon ~/mostro-config/lnd/admin.macaroon</code></pre>

      <p>Si LND est√° en la <strong>misma m√°quina</strong>, las rutas t√≠picas son:</p>
      <ul>
        <li><code>/root/.lnd/tls.cert</code></li>
        <li><code>/root/.lnd/data/chain/bitcoin/mainnet/admin.macaroon</code></li>
      </ul>

      <h4>Paso 8: Editar la configuraci√≥n</h4>
      <pre><code>nano ~/mostro-config/settings.toml</code></pre>

      <p><strong>Cambios requeridos:</strong></p>
      <pre><code>[lightning]
lnd_cert_file = '/config/lnd/tls.cert'
lnd_macaroon_file = '/config/lnd/admin.macaroon'
lnd_grpc_host = 'https://host.docker.internal:10009'  # Si LND en el mismo VPS
# O usar 'https://TU_IP_LND:10009' si LND en servidor diferente

[database]
url = "sqlite:///config/mostro.db"

[nostr]
nsec_privkey = 'TU_CLAVE_NSEC_AQUI'
relays = ['wss://relay.mostro.network', 'wss://nos.lol']

[mostro]
fee = 0.006                    # 0.6% comisi√≥n por operaci√≥n
max_order_amount = 1000000     # Orden m√°xima en sats
min_payment_amount = 100       # Orden m√≠nima en sats
fiat_currencies_accepted = ['USD', 'EUR']  # Tus monedas</code></pre>

      <p>Guardar: <code>Ctrl+X</code>, luego <code>Y</code>, luego <code>Enter</code>.</p>

      <h4>Paso 9: Ajustar permisos</h4>
      <div class="callout important">
        <div class="callout-title">‚ö†Ô∏è Importante</div>
        <p>Evita <code>chmod 777</code>. Usa permisos m√≠nimos.</p>
      </div>
      <pre><code>sudo chown -R 1000:1000 ~/mostro-config
chmod 700 ~/mostro-config
chmod 600 ~/mostro-config/settings.toml
chmod 600 ~/mostro-config/lnd/admin.macaroon</code></pre>

      <h4>Paso 10: Ejecutar el contenedor</h4>
      <p><strong>Si LND est√° en el mismo VPS:</strong></p>
      <pre><code>docker run -d --name mostro \
  --restart unless-stopped \
  --add-host=host.docker.internal:host-gateway \
  -v ~/mostro-config:/config \
  mostrop2p/mostro:v0.16.3</code></pre>

      <p><strong>Si LND est√° en un servidor diferente:</strong></p>
      <pre><code>docker run -d --name mostro \
  --restart unless-stopped \
  -v ~/mostro-config:/config \
  mostrop2p/mostro:v0.16.3</code></pre>

      <h4>Paso 11: Revisar los logs</h4>
      <pre><code>docker logs -f mostro</code></pre>

      <p>Busca estos mensajes:</p>
      <ul>
        <li><code>Settings correctly loaded</code> ‚Äî La configuraci√≥n es v√°lida</li>
        <li><code>Connected to LND</code> ‚Äî Conexi√≥n Lightning exitosa</li>
        <li><code>Connected to relay</code> ‚Äî Relay Nostr establecido</li>
      </ul>

      <div class="callout tip">
        <div class="callout-title">üí° Soluci√≥n de problemas</div>
        <p>Si ves <code>Permission denied (os error 13)</code>, vuelve a ajustar permisos: <code>chown -R 1000:1000 ~/mostro-config</code> y reinicia: <code>docker restart mostro</code>.</p>
      </div>

      <p>üéâ <strong>¬°Felicitaciones!</strong> Si ves conexiones exitosas en los logs, ¬°tu nodo Mostro est√° funcionando!</p>

      <h4>Actualizaci√≥n (Docker Hub)</h4>
      <pre><code>export MOSTRO_TAG=v0.16.3
docker pull mostrop2p/mostro:$MOSTRO_TAG
docker stop mostro
docker rm mostro
docker run -d --name mostro \
  --restart unless-stopped \
  --add-host=host.docker.internal:host-gateway \
  -v ~/mostro-config:/config \
  mostrop2p/mostro:$MOSTRO_TAG</code></pre>

      <div class="callout security">
        <div class="callout-title">üîí Nota de Seguridad</div>
        <p>Usa siempre un tag de versi√≥n espec√≠fica (ej. <code>mostrop2p/mostro:v0.16.3</code>) en lugar de <code>:latest</code> para controlar despliegues.</p>
      </div>

      <h3 id="option-b">Opci√≥n B: Docker Build (Construir imagen localmente)</h3>

      <h4>Paso 5: Descargar Mostro</h4>
      <pre><code>cd /opt
git clone https://github.com/MostroP2P/mostro.git
cd mostro</code></pre>

      <h4>Paso 6: Configurar archivos</h4>
      <pre><code>cd docker
mkdir -p config
cp ../settings.tpl.toml config/settings.toml</code></pre>

      <h4>Paso 7: Editar el archivo de configuraci√≥n</h4>
      <pre><code>nano config/settings.toml</code></pre>
      <p>Edita los mismos ajustes que en la Opci√≥n A, Paso 8.</p>

      <h4>Paso 8: Construir la imagen Docker</h4>
      <pre><code>cd ..
LND_CERT_FILE=/root/.lnd/tls.cert \
LND_MACAROON_FILE=/root/.lnd/data/chain/bitcoin/mainnet/admin.macaroon \
make docker-build</code></pre>

      <h4>Paso 9: Configurar contrase√±a de base de datos (Opcional)</h4>
      <pre><code># Crear archivo docker/.env
echo "MOSTRO_DB_PASSWORD='TuContrase√±aFuerte'" > docker/.env</code></pre>

      <h4>Paso 10: Iniciar Mostro</h4>
      <pre><code>make docker-up

# Verificar
docker compose -f docker/compose.yml ps

# Ver logs
docker compose -f docker/compose.yml logs -f mostro</code></pre>

      <p>üéâ <strong>¬°Felicitaciones!</strong> Si ves conexiones exitosas, ¬°tu nodo Mostro est√° funcionando!</p>

      <h3 id="option-c">Opci√≥n C: Compilaci√≥n Nativa (Para operadores t√©cnicos)</h3>

      <h4>Paso 5: Instalar Rust</h4>
      <pre><code>curl --proto '=https' --tlsv1.2 -sSf https://sh.rustup.rs | sh
source /root/.cargo/env
rustc --version
cargo --version</code></pre>

      <div class="callout important">
        <div class="callout-title">‚ö†Ô∏è Importante</div>
        <p>NO instales Rust via <code>apt install rustc</code>. Siempre usa <code>rustup</code>. El paquete del sistema suele estar desactualizado.</p>
      </div>

      <h4>Paso 6: Instalar dependencias de compilaci√≥n</h4>
      <pre><code>apt install -y cmake build-essential libsqlite3-dev libssl-dev \
  pkg-config git sqlite3 protobuf-compiler</code></pre>

      <h4>Paso 7: Descargar y compilar Mostro</h4>
      <pre><code>cd /opt
git clone https://github.com/MostroP2P/mostro.git
cd mostro
cargo build --release</code></pre>

      <div class="callout tip">
        <div class="callout-title">üí° Consejo</div>
        <p>Si la compilaci√≥n falla por falta de RAM, agrega espacio swap:</p>
      </div>
      <pre><code>fallocate -l 2G /swapfile
chmod 600 /swapfile
mkswap /swapfile
swapon /swapfile</code></pre>

      <h4>Paso 8‚Äì10: Instalar, inicializar y limpiar</h4>
      <pre><code>install target/release/mostrod /usr/local/bin
cargo install sqlx-cli --version 0.6.3
./init_db.sh
cargo clean  # Ahorra 2+ GB de espacio</code></pre>

      <h4>Paso 11‚Äì12: Crear usuario y configurar</h4>
      <pre><code>adduser --disabled-login mostro
mkdir -p /opt/mostro
cp settings.tpl.toml /opt/mostro/settings.toml
nano /opt/mostro/settings.toml</code></pre>
      <p>Edita los mismos ajustes que en la Opci√≥n A, Paso 8.</p>

      <h4>Paso 13‚Äì15: Prueba, permisos y servicio systemd</h4>
      <pre><code># Prueba de ejecuci√≥n
/usr/local/bin/mostrod -d /opt/mostro

# Establecer permisos
chown -R mostro:mostro /opt/mostro</code></pre>

      <p>Crear el servicio systemd:</p>
      <pre><code># /etc/systemd/system/mostro.service
[Unit]
Description=Mostro daemon
After=network.target

[Service]
Type=simple
User=mostro
WorkingDirectory=/home/mostro
Environment=RUST_LOG=info
ExecStart=/usr/local/bin/mostrod -d /opt/mostro
Restart=on-failure

[Install]
WantedBy=multi-user.target</code></pre>

      <pre><code>systemctl daemon-reload
systemctl enable mostro.service
systemctl start mostro.service
systemctl status mostro.service</code></pre>

      <p>üéâ <strong>¬°Felicitaciones!</strong> Tu nodo Mostro est√° funcionando como servicio del sistema.</p>

      <!-- ===== SECTION 4 ===== -->
      <h2 id="configuration">4. Configuraci√≥n en Detalle</h2>

      <p>El archivo <code>settings.toml</code> controla todo sobre tu nodo Mostro.</p>

      <h3 id="cfg-nostr">4.1 Claves Nostr ‚Äî La identidad de tu nodo</h3>
      <pre><code>[nostr]
nsec_privkey = 'TU_CLAVE_NSEC'
relays = [
  'wss://relay.mostro.network',
  'wss://nos.lol',
  'wss://relay.nostr.band'
]</code></pre>

      <p><strong>¬øQu√© relays usar?</strong></p>
      <ul>
        <li><code>wss://relay.mostro.network</code> ‚Äî Relay propio de Mostro, recomendado</li>
        <li><code>wss://nos.lol</code> ‚Äî Relay confiable y bien conectado</li>
        <li>Agrega 3‚Äì5 relays para fiabilidad. M√°s relays = mejor disponibilidad pero m√°s ancho de banda.</li>
      </ul>

      <div class="callout tip">
        <div class="callout-title">üí° Consejo</div>
        <p>Tambi√©n puedes ejecutar tu propio relay Nostr junto a Mostro (la instalaci√≥n Docker incluye uno por defecto).</p>
      </div>

      <h3 id="fees">4.2 Comisiones ‚Äî C√≥mo generas ingresos</h3>
      <pre><code>[mostro]
fee = 0.006
dev_fee_percentage = 0.30</code></pre>

      <p><strong>Comisi√≥n de trading</strong> (<code>fee</code>): Porcentaje cobrado por operaci√≥n, dividido entre comprador y vendedor.</p>
      <ul>
        <li><code>0.006</code> = 0.6% (cada parte paga 0.3%)</li>
        <li><code>0.01</code> = 1.0% (cada parte paga 0.5%)</li>
        <li><code>0</code> = gratis (bueno para hacer crecer tu base de usuarios)</li>
      </ul>

      <p><strong>Ejemplo:</strong> En una operaci√≥n de 100,000 sats con <code>fee = 0.006</code>: El comprador paga 300 sats, el vendedor paga 300 sats, tu nodo gana 600 sats en total.</p>

      <p><strong>Comisi√≥n de desarrollo</strong> (<code>dev_fee_percentage</code>): Un porcentaje de <em>tus</em> ganancias por comisiones que va al desarrollo de Mostro.</p>
      <ul>
        <li><code>0.30</code> = 30% (por defecto) ‚Äî de 600 sats, 180 van al fondo de desarrollo</li>
        <li>M√≠nimo: 10% (<code>0.10</code>), M√°ximo: 100% (<code>1.0</code>)</li>
        <li>Lo paga tu nodo de sus ganancias, no se cobra a los usuarios</li>
        <li>Todos los pagos son auditables p√∫blicamente a trav√©s de eventos Nostr (kind 8383)</li>
      </ul>

      <div class="callout important">
        <div class="callout-title">üìù Nota</div>
        <p>Establecer <code>dev_fee_percentage</code> por debajo de <code>0.10</code> impedir√° que Mostro arranque. Este m√≠nimo asegura financiamiento sostenible del desarrollo.</p>
      </div>

      <h3 id="limits">4.3 L√≠mites de √≥rdenes y monedas</h3>
      <pre><code>[mostro]
max_order_amount = 1000000
min_payment_amount = 100
fiat_currencies_accepted = ['USD', 'EUR', 'ARS', 'CUP']</code></pre>

      <ul>
        <li><strong><code>max_order_amount</code>:</strong> Operaci√≥n m√°s grande en satoshis. Config√∫ralo bas√°ndote en tu capacidad de canales Lightning.</li>
        <li><strong><code>min_payment_amount</code>:</strong> Operaci√≥n m√≠nima en satoshis. 1,000 o 10,000 es m√°s pr√°ctico que 100.</li>
        <li><strong><code>fiat_currencies_accepted</code>:</strong> Usa <a href="https://en.wikipedia.org/wiki/ISO_4217" target="_blank" rel="noopener noreferrer">c√≥digos ISO 4217</a>. Array vac√≠o <code>[]</code> acepta todas las monedas.</li>
      </ul>

      <h3 id="profile">4.4 Perfil del nodo (Opcional pero recomendado)</h3>
      <pre><code>[mostro]
name = "LatAm Mostro"
about = "Exchange P2P de Bitcoin para Latinoam√©rica. Soporte en espa√±ol."
picture = "https://ejemplo.com/tu-logo.png"
website = "https://sitio-de-tu-comunidad.com"</code></pre>

      <p>Estos configuran el perfil de tu Mostro en Nostr (NIP-01 kind 0 metadata). Los clientes muestran esta informaci√≥n para que los usuarios sepan en qu√© Mostro est√°n operando.</p>

      <h3 id="timeouts">4.5 Tiempos y expiraci√≥n</h3>
      <pre><code>[mostro]
expiration_hours = 24        # Cu√°nto tiempo una orden queda abierta
expiration_seconds = 900     # Tiempo para completar (15 min)
hold_invoice_expiration_window = 300  # Validez de la hold invoice (5 min)</code></pre>

      <h3 id="antispam">4.6 Anti-Spam</h3>
      <pre><code>[mostro]
pow = 0  # 0 = deshabilitado; 10-20 = moderado. Empieza con 0.</code></pre>

      <h3 id="rpc">4.7 Interfaz RPC Admin (Opcional)</h3>
      <pre><code>[rpc]
enabled = false
listen_address = "127.0.0.1"
port = 50051</code></pre>

      <p>Habil√≠tala para herramientas de administraci√≥n como MostriX (interfaz de terminal) para resoluci√≥n de disputas.</p>

      <div class="callout important">
        <div class="callout-title">‚ö†Ô∏è Seguridad</div>
        <p>Si habilitas RPC, mant√©n <code>listen_address</code> como <code>"127.0.0.1"</code> (solo localhost). Nunca expongas esto a internet.</p>
      </div>

      <!-- ===== SECTION 5 ===== -->
      <h2 id="operating">5. Operando Tu Nodo Mostro</h2>

      <h3 id="disputes">5.1 C√≥mo funcionan las disputas</h3>
      <p>Las disputas son tu responsabilidad operativa m√°s importante.</p>

      <p><strong>¬øCu√°ndo ocurren las disputas?</strong></p>
      <ul>
        <li>El comprador dice que pag√≥, el vendedor dice que no recibi√≥</li>
        <li>El vendedor se reh√∫sa a liberar los Bitcoin despu√©s de recibir el pago</li>
        <li>Una de las partes deja de responder</li>
      </ul>

      <p><strong>El proceso de disputa:</strong></p>
      <ol>
        <li><strong>El usuario abre una disputa</strong> ‚Äî Una de las partes hace clic en "Disputa" en el cliente</li>
        <li><strong>Mostro marca la orden</strong> ‚Äî El estado cambia a "Disputa", los fondos permanecen bloqueados</li>
        <li><strong>El √°rbitro toma el caso</strong> ‚Äî Un admin asignado a tu nodo investiga</li>
        <li><strong>Investigaci√≥n</strong> ‚Äî Se comunica con ambas partes, solicita pruebas</li>
        <li><strong>Resoluci√≥n</strong> ‚Äî El √°rbitro decide: liberar al comprador, o devolver al vendedor</li>
      </ol>

      <div class="callout important">
        <div class="callout-title">‚ö†Ô∏è Importante</div>
        <p>Elige a tus √°rbitros con cuidado. Tienen el poder de decidir a d√≥nde van los fondos bloqueados. Elige miembros de confianza e imparciales de la comunidad. Se recomiendan 2-3 √°rbitros.</p>
      </div>

      <h3 id="mostrix">5.2 Mostrix ‚Äî Tu herramienta de administraci√≥n</h3>
      <p>Mostrix es un cliente basado en terminal (TUI) para resoluci√≥n de disputas. Si ejecutas un nodo Mostro, necesitas Mostrix.</p>

      <pre><code># Instalar dependencias
sudo apt install -y cmake build-essential pkg-config

# Clonar y compilar
git clone https://github.com/MostroP2P/mostrix.git
cd mostrix
cargo build --release
cargo run</code></pre>

      <p>Configurar Mostrix en modo admin en <code>~/.mostrix/settings.toml</code>:</p>
      <pre><code>mostro_pubkey = "TU_PUBKEY_MOSTRO_HEX"
nsec_privkey = "nsec1tu_clave_personal"
admin_privkey = "nsec1tu_clave_admin"
relays = ["wss://relay.mostro.network", "wss://nos.lol"]
currencies = ["USD", "EUR", "ARS"]
user_mode = "admin"</code></pre>

      <h3 id="watchdog">5.3 mostro-watchdog ‚Äî Notificaciones de disputas en Telegram</h3>
      <p><code>mostro-watchdog</code> monitorea tu nodo Mostro para disputas y env√≠a alertas instant√°neas por Telegram. Esencial para tiempos de respuesta r√°pidos.</p>

      <pre><code>git clone https://github.com/MostroP2P/mostro-watchdog.git
cd mostro-watchdog
cargo build --release
cp config.example.toml config.toml
nano config.toml</code></pre>

      <pre><code>[mostro]
pubkey = "TU_PUBKEY_MOSTRO"

[nostr]
relays = ["wss://relay.mostro.network", "wss://nos.lol"]

[telegram]
bot_token = "TU_BOT_TOKEN"
chat_id = "TU_CHAT_ID"</code></pre>

      <div class="callout tip">
        <div class="callout-title">üí° Consejo</div>
        <p>Ejecuta <code>mostro-watchdog</code> como servicio systemd junto a tu nodo Mostro para monitoreo 24/7.</p>
      </div>

      <h3 id="monitoring">5.4 Monitoreo de uptime</h3>

      <p>Tu nodo necesita estar funcionando 24/7.</p>

      <pre><code># Nativo
systemctl status mostro.service
journalctl -u mostro -f
journalctl -u mostro | grep -E "(error|warn|connected)" --ignore-case

# Docker Hub (Opci√≥n A)
docker ps --filter name=mostro
docker logs -f mostro

# Docker Build (Opci√≥n B)
docker compose -f /opt/mostro/docker/compose.yml ps
docker compose -f /opt/mostro/docker/compose.yml logs -f mostro</code></pre>

      <div class="callout tip">
        <div class="callout-title">üí° Consejo pro</div>
        <p>Configura un monitor de uptime simple usando <a href="https://uptimerobot.com/" target="_blank" rel="noopener noreferrer">UptimeRobot</a> (nivel gratuito) o un cron job que te alerte si Mostro se cae.</p>
      </div>

      <h3 id="updating">5.5 Actualizando Mostro</h3>

      <p><strong>Docker Hub:</strong></p>
      <pre><code>export MOSTRO_TAG=v0.16.3
docker stop mostro
docker rm mostro
docker pull mostrop2p/mostro:${MOSTRO_TAG}
docker run -d --name mostro \
  --restart unless-stopped \
  --add-host=host.docker.internal:host-gateway \
  -v ~/mostro-config:/config \
  mostrop2p/mostro:${MOSTRO_TAG}</code></pre>

      <p><strong>Docker Build:</strong></p>
      <pre><code>cd /opt/mostro
git pull origin main
make docker-build
make docker-down
make docker-up</code></pre>

      <p><strong>Nativo:</strong></p>
      <pre><code>cd /opt/mostro
git pull origin main
cargo build --release
install target/release/mostrod /usr/local/bin
cargo clean
cargo install sqlx-cli --version 0.6.3
sqlx migrate run
systemctl restart mostro.service</code></pre>

      <div class="callout tip">
        <div class="callout-title">üí° Consejo</div>
        <p>Siempre respalda tu base de datos antes de actualizar.</p>
      </div>

      <h3 id="backups">5.6 Respaldos</h3>

      <p>Archivos cr√≠ticos a respaldar: <code>settings.toml</code> (¬°contiene tu clave privada Nostr!) y <code>mostro.db</code> (historial de √≥rdenes, reputaciones).</p>

      <pre><code># Respaldo manual ‚Äî Docker Hub:
mkdir -p /root/mostro-backups
cp ~/mostro-config/settings.toml /root/mostro-backups/settings.toml.$(date +%Y%m%d)
cp ~/mostro-config/mostro.db /root/mostro-backups/mostro.db.$(date +%Y%m%d)

# Respaldo manual ‚Äî Nativo:
cp /opt/mostro/settings.toml /root/mostro-backups/settings.toml.$(date +%Y%m%d)
cp /opt/mostro/mostro.db /root/mostro-backups/mostro.db.$(date +%Y%m%d)</code></pre>

      <p><strong>Respaldo diario automatizado</strong> (agregar al crontab con <code>crontab -e</code>):</p>
      <pre><code># Docker Hub (Opci√≥n A):
0 3 * * * mkdir -p /root/mostro-backups && cp ~/mostro-config/mostro.db /root/mostro-backups/mostro.db.$(date +\%Y\%m\%d) && cp ~/mostro-config/settings.toml /root/mostro-backups/settings.toml.$(date +\%Y\%m\%d)

# Nativo (Opci√≥n C) / Docker Build (Opci√≥n B):
0 3 * * * mkdir -p /root/mostro-backups && cp /opt/mostro/mostro.db /root/mostro-backups/mostro.db.$(date +\%Y\%m\%d) && cp /opt/mostro/settings.toml /root/mostro-backups/settings.toml.$(date +\%Y\%m\%d)</code></pre>

      <div class="callout important">
        <div class="callout-title">‚ö†Ô∏è Cr√≠tico</div>
        <p>Tu <code>nsec_privkey</code> en <code>settings.toml</code> ES la identidad de tu nodo. Si la pierdes, pierdes tu reputaci√≥n y todos los usuarios deben reconectarse a una nueva identidad. <strong>Guarda una copia offline.</strong></p>
      </div>

      <h3 id="activity">5.7 Revisando la actividad de operaciones</h3>

      <pre><code># Contar todas las √≥rdenes
sqlite3 /ruta/a/mostro.db "SELECT COUNT(*) FROM orders;"

# Operaciones exitosas recientes
sqlite3 /ruta/a/mostro.db "SELECT id, fiat_code, fiat_amount, amount, fee, status, created_at FROM orders WHERE status = 'success' ORDER BY created_at DESC LIMIT 10;"

# √ìrdenes pendientes
sqlite3 /ruta/a/mostro.db "SELECT id, fiat_code, fiat_amount, status, created_at FROM orders WHERE status = 'pending';"

# Ingresos totales por comisiones (fee del nodo + dev_fee)
sqlite3 /ruta/a/mostro.db "SELECT SUM(fee) as node_fees, SUM(dev_fee) as dev_fees, SUM(fee + dev_fee) as total_fees_sats FROM orders WHERE status = 'success';"</code></pre>

      <!-- ===== SECTION 6 ===== -->
      <h2 id="costs">6. Desglose de Costos</h2>

      <h3>Costos operativos mensuales</h3>
      <table class="guide-table">
        <thead><tr><th>Concepto</th><th>Costo mensual</th><th>Notas</th></tr></thead>
        <tbody>
          <tr><td>VPS (servidor)</td><td>$10‚Äì24</td><td>Depende del proveedor y las especificaciones</td></tr>
          <tr><td>Nombre de dominio (opcional)</td><td>$1‚Äì2</td><td>Para un sitio web/identidad</td></tr>
          <tr><td>Comisiones on-chain de canales Lightning</td><td>Variable</td><td>Apertura/cierre de canales</td></tr>
          <tr><td><strong>Total mensual</strong></td><td><strong>$11‚Äì26</strong></td><td>Excluyendo liquidez Lightning</td></tr>
        </tbody>
      </table>

      <h3>Costos √∫nicos / de capital</h3>
      <table class="guide-table">
        <thead><tr><th>Concepto</th><th>Costo</th><th>Notas</th></tr></thead>
        <tbody>
          <tr><td>Liquidez Lightning</td><td>0.01‚Äì1.0+ BTC</td><td>Bloqueado en canales; se recupera al cerrar</td></tr>
          <tr><td>Hardware del nodo (si se auto-aloja)</td><td>$0‚Äì600</td><td>Gratis si usas VPS; $300-600 para Start9/Umbrel</td></tr>
          <tr><td>Tiempo de configuraci√≥n</td><td>4‚Äì16 horas</td><td>Dependiendo del nivel de experiencia</td></tr>
        </tbody>
      </table>

      <h3>Potencial de ingresos</h3>
      <table class="guide-table">
        <thead><tr><th>Volumen mensual</th><th>Comisi√≥n (0.6%)</th><th>Comisi√≥n dev (30%)</th><th>Tu ingreso neto</th></tr></thead>
        <tbody>
          <tr><td>$1,000</td><td>~$6</td><td>~$1.80</td><td>~$4.20</td></tr>
          <tr><td>$10,000</td><td>~$60</td><td>~$18</td><td>~$42</td></tr>
          <tr><td>$50,000</td><td>~$300</td><td>~$90</td><td>~$210</td></tr>
          <tr><td>$100,000</td><td>~$600</td><td>~$180</td><td>~$420</td></tr>
        </tbody>
      </table>

      <div class="callout important">
        <div class="callout-title">üìù Realidad</div>
        <p>La mayor√≠a de los nodos nuevos tardan meses en construir volumen de operaciones. No esperes rentabilidad inmediata. El valor real suele venir de proporcionar un servicio a tu comunidad, con las comisiones como bonus.</p>
      </div>

      <h3>Compromiso de tiempo</h3>
      <table class="guide-table">
        <thead><tr><th>Tarea</th><th>Frecuencia</th><th>Tiempo</th></tr></thead>
        <tbody>
          <tr><td>Monitoreo (revisar logs, estado)</td><td>Diario</td><td>5‚Äì10 min</td></tr>
          <tr><td>Resoluci√≥n de disputas</td><td>Seg√∫n necesidad</td><td>15‚Äì60 min por disputa</td></tr>
          <tr><td>Actualizaciones</td><td>Mensual</td><td>15‚Äì30 min</td></tr>
          <tr><td>Gesti√≥n de liquidez</td><td>Semanal</td><td>15‚Äì30 min</td></tr>
          <tr><td><strong>Estimaci√≥n semanal total</strong></td><td></td><td><strong>1‚Äì3 horas</strong></td></tr>
        </tbody>
      </table>

      <!-- ===== SECTION 7 ===== -->
      <h2 id="faq">7. Preguntas Frecuentes</h2>

      <h3>¬øNecesito ser desarrollador para ejecutar un nodo Mostro?</h3>
      <p>No, pero necesitas sentirte c√≥modo con operaciones b√°sicas de l√≠nea de comandos (escribir comandos, editar archivos de texto). La ruta Docker (Opci√≥n A) est√° dise√±ada para ser accesible.</p>

      <h3>¬øPuedo ejecutar Mostro en una Raspberry Pi?</h3>
      <p>T√©cnicamente s√≠ (usando Start9 o similar), pero no se recomienda para producci√≥n debido a la limitaci√≥n de CPU y RAM. Un VPS es m√°s confiable.</p>

      <h3>¬øPuedo usar Core Lightning (CLN) en lugar de LND?</h3>
      <p>No. Mostro actualmente solo soporta LND, porque depende de la implementaci√≥n espec√≠fica de hold invoices de LND. El soporte para otras implementaciones podr√≠a llegar en el futuro.</p>

      <h3>¬øC√≥mo se conectan los usuarios a mi Mostro?</h3>
      <p>Los usuarios necesitan una app cliente de Mostro (como Mostro Mobile o mostro-cli) y la clave p√∫blica de tu Mostro (npub). Agregan tu npub a su cliente, y el cliente se comunica a trav√©s de relays Nostr. No se necesita conexi√≥n directa.</p>

      <h3>¬øPuedo ejecutar m√∫ltiples instancias de Mostro?</h3>
      <p>S√≠, pero cada una necesita su propio par de claves Nostr, nodo LND (o al menos canales/liquidez separados), y configuraci√≥n.</p>

      <h3>¬øEs legal?</h3>
      <p>Depende mucho de tu jurisdicci√≥n. Mostro es software para trading peer-to-peer. En algunas jurisdicciones, operar un exchange P2P puede requerir licencias. <strong>Consulta las regulaciones locales y asesor√≠a legal.</strong></p>

      <h3>¬øCu√°nto ancho de banda usa Mostro?</h3>
      <p>Muy poco ‚Äî principalmente eventos Nostr peque√±os. Unos pocos GB por mes es t√≠pico incluso con volumen moderado.</p>

      <h3>¬øQu√© pasa si mi nodo se desconecta?</h3>
      <p>Las √≥rdenes pendientes eventualmente expiran. Las operaciones activas con fondos bloqueados contin√∫an cuando vuelves a estar online. Si est√°s offline demasiado tiempo, los usuarios pueden perder confianza.</p>

      <h3>¬øPuedo cambiar mi clave Nostr despu√©s?</h3>
      <p>Puedes, pero perder√°s la identidad y reputaci√≥n de tu nodo. Los usuarios lo ver√°n como un Mostro nuevo. Trata tu clave como tu identidad de marca.</p>

      <h3>¬øPuedo perder dinero ejecutando un nodo Mostro?</h3>
      <p>S√≠, es posible: los fondos de canales Lightning podr√≠an estar en riesgo por bugs (raro); el cierre forzado de canales durante per√≠odos de comisiones altas puede ser costoso; los costos de VPS son continuos.</p>

      <h3>¬øLa liquidez Lightning est√° "en riesgo"?</h3>
      <p>Tu liquidez Lightning es tuya. No est√° en riesgo por Mostro en s√≠ ‚Äî las hold invoices son bloqueos temporales. Sin embargo, aplican los riesgos est√°ndar de Lightning Network (cierres forzados, canales atascados, bugs).</p>

      <h3>¬øCu√°ndo alcanzar√© el punto de equilibrio?</h3>
      <p>Depende de tus costos y volumen de operaciones. Con $20/mes de costos y 0.6% de comisi√≥n, necesitas ~$5,000/mes en operaciones para cubrir costos (antes de la comisi√≥n de desarrollo). La mayor√≠a de las comunidades tardan 3‚Äì6 meses en alcanzar un volumen significativo.</p>

      <!-- ===== SECTION 8 ===== -->
      <h2 id="security">8. Consideraciones de Seguridad</h2>

      <div class="callout important">
        <div class="callout-title">‚ö†Ô∏è Aviso de software en etapa temprana</div>
        <p><strong>Mostro est√° en una etapa temprana de desarrollo.</strong> Aunque el equipo trabaja duro para asegurar confiabilidad, puede haber bugs no descubiertos ‚Äî incluyendo bugs de seguridad que podr√≠an resultar en p√©rdida de fondos. <strong>Los desarrolladores no son responsables de ninguna p√©rdida de dinero debido a bugs de software.</strong></p>
        <p>Mostro es open-source y su c√≥digo est√° abierto a auditor√≠as. Animamos a las comunidades a promover y financiar auditor√≠as de seguridad independientes.</p>
        <p>Dicho esto, <strong>el mecanismo central de custodia usando hold invoices de Lightning ha sido probado en batalla desde 2021</strong>, cuando @lnp2pBot implement√≥ por primera vez este tipo de custodia. Miles de operaciones han sido completadas exitosamente.</p>
      </div>

      <h3>Operando bajo reg√≠menes autoritarios</h3>

      <p>Si operas en un pa√≠s con un gobierno autoritario, <strong>la privacidad no es opcional ‚Äî es un requisito de seguridad.</strong></p>

      <ol>
        <li><strong>Ejecuta tu nodo Mostro detr√°s de Tor y/o una VPN.</strong> Esto oculta la IP de tu servidor de los relays Nostr.</li>
        <li><strong>Si Tor/VPN no es posible</strong> (com√∫n en pa√≠ses en desarrollo con internet lento), <strong>solo publica eventos en relays que poseas o en los que conf√≠es.</strong></li>
        <li><strong>Ten mucho cuidado con qu√© relays usas.</strong> En el futuro, los gobiernos podr√≠an crear relays Nostr espec√≠ficamente para recolectar direcciones IP.</li>
        <li><strong>Considera tambi√©n la privacidad de tu nodo Lightning.</strong> Ejecutar LND detr√°s de Tor es posible y recomendado en entornos sensibles.</li>
      </ol>

      <div class="callout tip">
        <div class="callout-title">üí° Consejo</div>
        <p>La belleza de que Mostro sea descentralizado es que incluso si un nodo es apagado, otros siguen funcionando. Pero la prevenci√≥n siempre es mejor que la recuperaci√≥n. Toma la privacidad en serio desde el primer d√≠a.</p>
      </div>

      <!-- ===== SECTION 9 ===== -->
      <h2 id="troubleshooting">9. Soluci√≥n de Problemas</h2>

      <h3>Mostro no arranca</h3>

      <h4>"Configuration error: dev_fee_percentage below minimum"</h4>
      <p>Establece <code>dev_fee_percentage</code> en al menos <code>0.10</code> en settings.toml.</p>

      <h4>Archivo de configuraci√≥n o base de datos no encontrado</h4>
      <p>Aseg√∫rate de que el flag <code>-d</code> apunte al directorio que contiene <code>settings.toml</code>. Para Docker Hub: verifica que <code>~/mostro-config/settings.toml</code> exista.</p>

      <h4>"Failed to connect to LND"</h4>
      <ul>
        <li>Verifica que LND est√© ejecut√°ndose: <code>lncli getinfo</code></li>
        <li>Revisa que <code>lnd_grpc_host</code> coincida con la direcci√≥n de tu LND</li>
        <li>Verifica que las rutas de <code>tls.cert</code> y <code>admin.macaroon</code> sean correctas</li>
        <li>Docker + LND en host: usa <code>host.docker.internal</code></li>
      </ul>

      <h3>Problemas de conexi√≥n</h3>

      <h4>Mostro arranca pero no se conecta a los relays</h4>
      <ul>
        <li>Verifica las URLs de los relays (deben empezar con <code>wss://</code>)</li>
        <li>Aseg√∫rate de que el firewall de tu VPS permita conexiones salientes en el puerto 443</li>
        <li>Prueba con diferentes relays ‚Äî algunos pueden estar temporalmente ca√≠dos</li>
      </ul>

      <h3>Problemas con operaciones</h3>

      <h4>Las √≥rdenes no aparecen en los clientes</h4>
      <ul>
        <li>Verifica las conexiones a relays en los logs</li>
        <li>Aseg√∫rate de que los clientes usen los mismos relays que tu nodo</li>
      </ul>

      <h4>Pagos fallando</h4>
      <ul>
        <li>Revisa la liquidez: <code>lncli listchannels</code></li>
        <li>Aseg√∫rate de tener suficiente capacidad saliente</li>
        <li>Revisa el ajuste <code>max_routing_fee</code></li>
      </ul>

      <h3>Problemas de base de datos</h3>

      <h4>Errores de base de datos bloqueada</h4>
      <pre><code>ps aux | grep mostrod
# Si hay m√∫ltiples procesos, elimina los extras:
kill &lt;PID&gt;</code></pre>

      <h3>Obteniendo ayuda</h3>

      <ol>
        <li><strong>Revisa los logs primero</strong> ‚Äî la mayor√≠a de los errores explican qu√© sali√≥ mal</li>
        <li><strong>Telegram (Desarrolladores):</strong> <a href="https://t.me/mostro_dev" target="_blank" rel="noopener noreferrer">@mostro_dev</a></li>
        <li><strong>Telegram (Comunidad):</strong> <a href="https://t.me/MostroP2P" target="_blank" rel="noopener noreferrer">@MostroP2P</a></li>
        <li><strong>GitHub Issues:</strong> <a href="https://github.com/MostroP2P/mostro/issues" target="_blank" rel="noopener noreferrer">github.com/MostroP2P/mostro/issues</a></li>
        <li><strong>DeepWiki:</strong> <a href="https://deepwiki.com/MostroP2P/mostro" target="_blank" rel="noopener noreferrer">deepwiki.com/MostroP2P/mostro</a></li>
      </ol>

      <p>Cuando pidas ayuda, siempre incluye: tu versi√≥n de Mostro, la salida relevante de los logs, y lo que ya intentaste.</p>

      <!-- ===== APPENDIX ===== -->
      <h2 id="appendix">Ap√©ndice: Referencia R√°pida</h2>

      <h3>Ubicaciones importantes de archivos</h3>
      <table class="guide-table">
        <thead><tr><th>Archivo</th><th>Docker Hub</th><th>Nativo</th></tr></thead>
        <tbody>
          <tr><td>Configuraci√≥n</td><td><code>~/mostro-config/settings.toml</code></td><td><code>/opt/mostro/settings.toml</code></td></tr>
          <tr><td>Base de datos</td><td><code>~/mostro-config/mostro.db</code></td><td><code>/opt/mostro/mostro.db</code></td></tr>
          <tr><td>Cert LND</td><td><code>~/mostro-config/lnd/tls.cert</code></td><td>Var√≠a (revisar config LND)</td></tr>
          <tr><td>Macaroon LND</td><td><code>~/mostro-config/lnd/admin.macaroon</code></td><td>Var√≠a (revisar config LND)</td></tr>
          <tr><td>Servicio</td><td>N/A</td><td><code>/etc/systemd/system/mostro.service</code></td></tr>
          <tr><td>Logs</td><td><code>docker logs -f mostro</code></td><td><code>journalctl -u mostro</code></td></tr>
        </tbody>
      </table>

      <h3>Comandos esenciales</h3>
      <pre><code># Docker
docker logs -f mostro         # Ver logs
docker restart mostro          # Reiniciar
docker stop mostro             # Detener

# Nativo (systemd)
systemctl start mostro         # Iniciar
systemctl stop mostro          # Detener
systemctl restart mostro       # Reiniciar
systemctl status mostro        # Ver estado
journalctl -u mostro -f        # Ver logs

# Base de datos
sqlite3 mostro.db "SELECT COUNT(*) FROM orders;"                           # Total de √≥rdenes
sqlite3 mostro.db "SELECT COUNT(*) FROM orders WHERE status='success';"    # Operaciones exitosas
sqlite3 mostro.db "SELECT SUM(fee + dev_fee) FROM orders WHERE status='success';"  # Total de comisiones</code></pre>

      <h3>Configuraci√≥n recomendada para nodos nuevos</h3>
      <pre><code>[mostro]
fee = 0.006
max_order_amount = 500000
min_payment_amount = 1000
expiration_hours = 24
expiration_seconds = 900
pow = 0
dev_fee_percentage = 0.30
fiat_currencies_accepted = ['USD']  # Cambia a tu moneda local

[nostr]
relays = [
  'wss://relay.mostro.network',
  'wss://nos.lol',
  'wss://relay.nostr.band'
]</code></pre>

      <div style="text-align:center; margin-top:48px; padding:24px; border-top:1px solid var(--border);">
        <p>Esta gu√≠a es mantenida por la comunidad Mostro. ¬øEncontraste un error o quieres mejorarla?<br>
        Las contribuciones son bienvenidas en <a href="https://github.com/MostroP2P/community" target="_blank" rel="noopener noreferrer">github.com/MostroP2P/community</a></p>
        <p style="color:var(--text-secondary); margin-top:12px;">√öltima actualizaci√≥n: Febrero 2026 ¬∑ Mostro v0.16.3</p>
      </div>
    </article>
  </div>

  <Footer locale={locale} />
</Layout>

<style>
  .flow-diagram {
    background: rgba(140, 198, 63, 0.05);
    border: 1px solid rgba(140, 198, 63, 0.2);
    border-radius: 12px;
    padding: 24px;
    margin: 20px 0;
    font-family: monospace;
  }
  .flow-step {
    padding: 8px 0;
    line-height: 1.6;
  }
  .step-num {
    color: var(--accent);
    font-weight: 700;
    font-size: 1.1rem;
  }
  .arrow {
    color: var(--accent);
    font-weight: 700;
  }
  .badge {
    display: inline-block;
    padding: 2px 10px;
    border-radius: 12px;
    font-size: 0.8rem;
    font-weight: 600;
  }
  .badge-easy {
    background: rgba(76, 175, 80, 0.15);
    color: #2E7D32;
  }
  .badge-medium {
    background: rgba(255, 193, 7, 0.15);
    color: #7B5800;
  }
  .badge-hard {
    background: rgba(244, 67, 54, 0.15);
    color: #B71C1C;
  }
</style>

<script>
  document.getElementById('toc-toggle')?.addEventListener('click', () => {
    document.getElementById('toc-mobile-list')?.classList.toggle('open');
  });
</script>
