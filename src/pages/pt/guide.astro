---
import Layout from '../../layouts/Layout.astro';
import Header from '../../components/Header.astro';
import Footer from '../../components/Footer.astro';
import '../../styles/guide.css';

const locale = 'pt' as const;
---

<Layout title="Guia de Configura√ß√£o do N√≥ ‚Äî Mostro Community" description="Guia completo para executar seu pr√≥prio n√≥ Mostro P2P de troca de Bitcoin." locale={locale}>
  <Header locale={locale} />

  <div class="container guide-layout">
    <nav class="toc">
      <div class="toc-title">Nesta p√°gina</div>
      <ul class="toc-list">
        <li><a href="#what-is-mostro">1. O que √© Mostro?</a></li>
        <li class="toc-h3"><a href="#why-run">Por que um n√≥?</a></li>
        <li class="toc-h3"><a href="#how-it-works">Como funciona</a></li>
        <li><a href="#prerequisites">2. Pr√©-requisitos</a></li>
        <li class="toc-h3"><a href="#vps">Servidor (VPS)</a></li>
        <li class="toc-h3"><a href="#lnd">N√≥ Lightning (LND)</a></li>
        <li class="toc-h3"><a href="#liquidity">Liquidez</a></li>
        <li class="toc-h3"><a href="#nostr-keys">Chaves Nostr</a></li>
        <li class="toc-h3"><a href="#skill-level">N√≠vel t√©cnico</a></li>
        <li><a href="#setup">3. Instala√ß√£o passo a passo</a></li>
        <li class="toc-h3"><a href="#common-steps">Passos comuns</a></li>
        <li class="toc-h3"><a href="#option-a">Op√ß√£o A: Docker Hub</a></li>
        <li class="toc-h3"><a href="#option-b">Op√ß√£o B: Docker Build</a></li>
        <li class="toc-h3"><a href="#option-c">Op√ß√£o C: Nativo</a></li>
        <li><a href="#configuration">4. Configura√ß√£o</a></li>
        <li class="toc-h3"><a href="#cfg-nostr">Chaves Nostr</a></li>
        <li class="toc-h3"><a href="#fees">Taxas</a></li>
        <li class="toc-h3"><a href="#limits">Limites</a></li>
        <li class="toc-h3"><a href="#profile">Perfil do n√≥</a></li>
        <li class="toc-h3"><a href="#timeouts">Tempos</a></li>
        <li class="toc-h3"><a href="#antispam">Anti-Spam</a></li>
        <li class="toc-h3"><a href="#rpc">RPC Admin</a></li>
        <li><a href="#operating">5. Opera√ß√£o do n√≥</a></li>
        <li class="toc-h3"><a href="#disputes">Disputas</a></li>
        <li class="toc-h3"><a href="#mostrix">Mostrix</a></li>
        <li class="toc-h3"><a href="#watchdog">mostro-watchdog</a></li>
        <li class="toc-h3"><a href="#monitoring">Monitoramento</a></li>
        <li class="toc-h3"><a href="#updating">Atualiza√ß√£o</a></li>
        <li class="toc-h3"><a href="#backups">Backups</a></li>
        <li class="toc-h3"><a href="#activity">Atividade</a></li>
        <li><a href="#costs">6. An√°lise de custos</a></li>
        <li><a href="#faq">7. Perguntas frequentes</a></li>
        <li><a href="#security">8. Seguran√ßa</a></li>
        <li><a href="#troubleshooting">9. Solu√ß√£o de problemas</a></li>
        <li><a href="#appendix">Ap√™ndice</a></li>
      </ul>
    </nav>

    <div class="toc-mobile">
      <button class="toc-toggle" id="toc-toggle">üìë √çndice</button>
      <div class="toc-mobile-list" id="toc-mobile-list">
        <ul class="toc-list">
          <li><a href="#what-is-mostro">1. O que √© Mostro?</a></li>
          <li><a href="#prerequisites">2. Pr√©-requisitos</a></li>
          <li><a href="#setup">3. Instala√ß√£o</a></li>
          <li><a href="#configuration">4. Configura√ß√£o</a></li>
          <li><a href="#operating">5. Opera√ß√£o</a></li>
          <li><a href="#costs">6. Custos</a></li>
          <li><a href="#faq">7. FAQ</a></li>
          <li><a href="#security">8. Seguran√ßa</a></li>
          <li><a href="#troubleshooting">9. Problemas</a></li>
        </ul>
      </div>
    </div>

    <article class="guide-content">
      <h1>Executando Seu Pr√≥prio N√≥ Mostro</h1>
      <p class="guide-version">Mostro v0.16.3 ‚Äî Guia da Comunidade ¬∑ Fevereiro 2026</p>

      <!-- ===== SECTION 1 ===== -->
      <h2 id="what-is-mostro">1. O que √© Mostro e por que sua comunidade deveria executar um?</h2>

      <p>Mostro √© uma <strong>exchange peer-to-peer de Bitcoin</strong> que permite √†s pessoas comprar e vender Bitcoin usando moedas locais (d√≥lares, euros, reais ‚Äî qualquer moeda) sem precisar fornecer documentos de identidade (KYC). Pense nele como um marketplace descentralizado onde compradores e vendedores podem negociar diretamente.</p>

      <p>Funciona usando duas tecnologias:</p>
      <ul>
        <li><strong>Lightning Network</strong> ‚Äî uma camada de pagamentos r√°pidos e de baixo custo para Bitcoin (pense nela como a via expressa do Bitcoin para pagamentos pequenos e √°geis)</li>
        <li><strong>Nostr</strong> ‚Äî um protocolo de comunica√ß√£o resistente √† censura (pense nele como um sistema de mensagens que ningu√©m pode desligar)</li>
      </ul>

      <p>Mostro atua como um <strong>coordenador de cust√≥dia</strong> ‚Äî ret√©m os Bitcoin do vendedor em um "cofre" tempor√°rio (chamado hold invoice) at√© que o comprador confirme que enviou o pagamento em moeda local. Mostro nunca controla realmente os fundos de ningu√©m; apenas os ret√©m brevemente durante a negocia√ß√£o.</p>

      <h3 id="why-run">Por que sua comunidade iria querer executar um n√≥ Mostro?</h3>
      <ol>
        <li><strong>Receita de taxas</strong> ‚Äî Cada opera√ß√£o gera uma taxa (0,6% por padr√£o). Se sua comunidade faz $10.000 em opera√ß√µes mensais, s√£o ~$60/m√™s em taxas.</li>
        <li><strong>Trading P2P sem KYC</strong> ‚Äî Os membros da sua comunidade podem comprar e vender Bitcoin sem fornecer documentos de identidade. Especialmente importante em regi√µes com moedas inst√°veis ou regulamenta√ß√µes restritivas.</li>
        <li><strong>Disputas no seu idioma</strong> ‚Äî Quando uma opera√ß√£o d√° errado, a <em>sua</em> comunidade resolve, no <em>seu</em> idioma, entendendo os <em>seus</em> m√©todos de pagamento locais.</li>
        <li><strong>Independ√™ncia</strong> ‚Äî Nenhuma empresa pode fechar sua exchange. Nenhum governo pode pressionar um √∫nico operador a fech√°-la.</li>
        <li><strong>Personaliza√ß√£o</strong> ‚Äî Voc√™ escolhe quais moedas suportar, quais m√©todos de pagamento permitir e quais taxas cobrar.</li>
      </ol>

      <h3 id="how-it-works">Como Mostro Funciona (Simplificado)</h3>

      <div class="flow-diagram">
        <div class="flow-step"><span class="step-num">1.</span> Alice quer VENDER Bitcoin por $50 USD <span class="arrow">‚Üí</span> Cria uma ordem no Mostro</div>
        <div class="flow-step"><span class="step-num">2.</span> Bob quer COMPRAR Bitcoin com $50 USD <span class="arrow">‚Üí</span> V√™ a ordem de Alice e a aceita</div>
        <div class="flow-step"><span class="step-num">3.</span> Mostro cria um "cofre" (hold invoice) <span class="arrow">‚Üí</span> Alice envia seus Bitcoin para o cofre</div>
        <div class="flow-step"><span class="step-num">4.</span> Bob envia $50 para Alice via transfer√™ncia banc√°ria, Pix, dinheiro, etc. <span class="arrow">‚Üí</span> Bob pressiona "Fiat Enviado" no app</div>
        <div class="flow-step"><span class="step-num">5.</span> Alice confirma que recebeu os $50 <span class="arrow">‚Üí</span> Pressiona "Liberar"</div>
        <div class="flow-step"><span class="step-num">6.</span> Mostro libera os Bitcoin do cofre para Bob <span class="arrow">‚Üí</span> Opera√ß√£o conclu√≠da! ‚úì</div>
      </div>

      <p>Se algo der errado (ex: Bob diz que pagou mas Alice n√£o recebeu), qualquer uma das partes pode abrir uma <strong>disputa</strong>, e os √°rbitros designados da sua comunidade investigam e resolvem.</p>

      <!-- ===== SECTION 2 ===== -->
      <h2 id="prerequisites">2. Pr√©-requisitos ‚Äî O que voc√™ precisa antes de come√ßar</h2>

      <h3 id="vps">2.1 Um Servidor (VPS)</h3>

      <p>Um <strong>VPS</strong> (Servidor Virtual Privado) √© um computador em um data center que funciona 24/7. Voc√™ alugar√° um para hospedar seu n√≥ Mostro.</p>

      <p><strong>Especifica√ß√µes m√≠nimas:</strong></p>
      <table class="guide-table">
        <thead><tr><th>Recurso</th><th>M√≠nimo</th><th>Recomendado</th></tr></thead>
        <tbody>
          <tr><td>CPU</td><td>2 vCPUs (compartilhadas)</td><td>2+ vCPUs</td></tr>
          <tr><td>RAM</td><td>2 GB</td><td>4 GB</td></tr>
          <tr><td>Armazenamento</td><td>60 GB SSD</td><td>100 GB SSD</td></tr>
          <tr><td>Largura de banda</td><td>3 TB/m√™s</td><td>3+ TB/m√™s</td></tr>
          <tr><td>SO</td><td>Ubuntu 22.04+ LTS</td><td>Ubuntu 24.04 LTS</td></tr>
        </tbody>
      </table>

      <p><strong>Custo mensal estimado:</strong> $10‚Äì$24/m√™s.</p>

      <p><strong>Provedores de VPS populares:</strong></p>
      <ul>
        <li><a href="https://www.hostinger.com/" target="_blank" rel="noopener noreferrer">Hostinger</a> ‚Äî a partir de ~$7/m√™s (pre√ßo promocional; renova√ß√£o pode ser maior) (KVM 2: 2 vCPU, 8GB RAM, 100GB NVMe, 8TB largura de banda) ¬∑ Aceita Bitcoin</li>
        <li><a href="https://www.hetzner.com/" target="_blank" rel="noopener noreferrer">Hetzner</a> ‚Äî ‚Ç¨3,49-8/m√™s (CX23 a partir de ‚Ç¨3,49, bom custo-benef√≠cio, baseado na UE)</li>
        <li><a href="https://www.digitalocean.com/" target="_blank" rel="noopener noreferrer">Digital Ocean</a> ‚Äî $24/m√™s (4GB RAM, 2 CPUs, 80GB SSD) ou $32/m√™s (4GB RAM, 2 Intel CPUs, 120GB NVMe)</li>
        <li><a href="https://www.ovhcloud.com/" target="_blank" rel="noopener noreferrer">OVH</a> ‚Äî ~$6-12/m√™s</li>
        <li><a href="https://www.linode.com/" target="_blank" rel="noopener noreferrer">Linode/Akamai</a> ‚Äî $12/m√™s</li>
        <li><a href="https://www.lunanode.com/" target="_blank" rel="noopener noreferrer">Lunanode</a> ‚Äî Aceita pagamentos em Bitcoin</li>
      </ul>

      <div class="callout tip">
        <div class="callout-title">üí° Dica</div>
        <p>Muitos provedores de VPS aceitam pagamentos em Bitcoin. Procure essa op√ß√£o se quiser manter coer√™ncia com a filosofia Bitcoin.</p>
      </div>

      <p>Voc√™ precisa se sentir confort√°vel conectando-se a um servidor via SSH. Se nunca fez isso, procure um tutorial sobre "Conectar via SSH a um VPS" ‚Äî √© mais simples do que parece.</p>

      <h3 id="lnd">2.2 Um N√≥ Lightning Network (LND)</h3>

      <p>Lightning Network √© um sistema "camada 2" constru√≠do sobre o Bitcoin que permite pagamentos r√°pidos e baratos. Para executar o Mostro, voc√™ precisa de um <strong>n√≥ LND</strong> (Lightning Network Daemon) ‚Äî o software Lightning espec√≠fico com o qual o Mostro trabalha.</p>

      <p><strong>Suas op√ß√µes:</strong></p>
      <table class="guide-table">
        <thead><tr><th>Op√ß√£o</th><th>Dificuldade</th><th>Custo</th><th>Notas</th></tr></thead>
        <tbody>
          <tr><td>Usar um n√≥ LND existente</td><td><span class="badge badge-easy">F√°cil</span></td><td>Gr√°tis (se tiver um)</td><td>Melhor se algu√©m j√° tem um</td></tr>
          <tr><td>Executar LND no mesmo VPS</td><td><span class="badge badge-hard">Dif√≠cil</span></td><td>Mesmo VPS + liquidez</td><td>Requer VPS com 4GB+ RAM</td></tr>
          <tr><td>Solu√ß√£o n√≥-em-caixa</td><td><span class="badge badge-medium">M√©dio</span></td><td>$200-600 + liquidez</td><td><a href="https://start9.com/" target="_blank" rel="noopener noreferrer">Start9</a>, <a href="https://umbrel.com/" target="_blank" rel="noopener noreferrer">Umbrel</a>, <a href="https://raspiblitz.org/" target="_blank" rel="noopener noreferrer">RaspiBlitz</a></td></tr>
          <tr><td>StartOS com pacote Mostro</td><td><span class="badge badge-easy">Mais f√°cil</span></td><td>$300-600 + liquidez</td><td>Start9 tem um pacote Mostro de um clique</td></tr>
          <tr><td>Usar Voltage.cloud</td><td><span class="badge badge-easy">F√°cil</span></td><td>A partir de ~$20/m√™s + liquidez</td><td><a href="https://voltage.cloud/" target="_blank" rel="noopener noreferrer">Voltage</a> ‚Äî LND hospedado com infraestrutura gerenciada</td></tr>
        </tbody>
      </table>

      <div class="callout important">
        <div class="callout-title">‚ö†Ô∏è Importante</div>
        <p>Mostro requer especificamente <strong>LND</strong> (n√£o CLN/Core Lightning, n√£o Eclair, n√£o LDK). Certifique-se de que seu n√≥ Lightning execute LND.</p>
      </div>

      <p><strong>O que voc√™ precisa do seu n√≥ LND:</strong></p>
      <ul>
        <li>O arquivo <code>tls.cert</code> (um certificado de seguran√ßa)</li>
        <li>O arquivo <code>admin.macaroon</code> (um token de autentica√ß√£o)</li>
        <li>O endere√ßo gRPC (tipicamente <code>https://127.0.0.1:10009</code> se na mesma m√°quina)</li>
      </ul>

      <h3 id="liquidity">2.3 Liquidez Lightning</h3>

      <p>Para facilitar as opera√ß√µes, seu n√≥ Lightning precisa de <strong>canais</strong> com Bitcoin neles. Pense nos canais Lightning como t√∫neis de pagamento pr√©-financiados. O Bitcoin dentro desses canais √© sua "liquidez".</p>

      <p><strong>Quanto voc√™ precisa?</strong></p>
      <table class="guide-table">
        <thead><tr><th>Volume de trading alvo</th><th>Liquidez sugerida</th><th>BTC aproximado</th></tr></thead>
        <tbody>
          <tr><td>Comunidade pequena (poucas opera√ß√µes/dia)</td><td>1‚Äì5 milh√µes de sats</td><td>0,01‚Äì0,05 BTC</td></tr>
          <tr><td>Comunidade m√©dia</td><td>5‚Äì20 milh√µes de sats</td><td>0,05‚Äì0,20 BTC</td></tr>
          <tr><td>Comunidade ativa</td><td>20‚Äì100 milh√µes de sats</td><td>0,20‚Äì1,0 BTC</td></tr>
        </tbody>
      </table>

      <div class="callout tip">
        <div class="callout-title">üí° Nota sobre Liquidez Lightning</div>
        <p>O Bitcoin nos seus canais Lightning est√° bloqueado <strong>onchain</strong> mas continua altamente utiliz√°vel via Lightning Network. Muitos servi√ßos aceitam pagamentos Lightning ‚Äî de cafeterias a provedores de VPS ‚Äî tornando sua liquidez bastante flex√≠vel para uso cotidiano.</p>
      </div>

      <p><strong>Comece pequeno, cres√ßa gradualmente.</strong> Comece com o suficiente para as necessidades iniciais da sua comunidade e monitore o feedback. Quando os traders reportarem falhas em ordens por capacidade insuficiente, esse √© o sinal para adicionar mais. Ou√ßa sua comunidade.</p>

      <p><strong>Obtendo liquidez:</strong></p>
      <ul>
        <li>Abra canais para n√≥s bem conectados (use <a href="https://lightningnetwork.plus/" target="_blank" rel="noopener noreferrer">Lightning Network+</a> ou <a href="https://amboss.space/" target="_blank" rel="noopener noreferrer">Amboss</a> para encontrar bons pares)</li>
        <li>Voc√™ precisa de capacidade <strong>de sa√≠da</strong> (para pagar compradores) e capacidade <strong>de entrada</strong> (para receber de vendedores)</li>
        <li>Obter liquidez de entrada geralmente √© mais dif√≠cil ‚Äî considere <a href="https://lightning.engineering/loop/" target="_blank" rel="noopener noreferrer">Lightning Loop</a>, <a href="https://amboss.space/magma" target="_blank" rel="noopener noreferrer">Magma</a>, ou servi√ßos de troca de canais</li>
      </ul>

      <h3 id="nostr-keys">2.4 Chaves Nostr</h3>

      <p>Seu n√≥ Mostro precisa de sua pr√≥pria identidade na rede Nostr ‚Äî um par de chaves criptogr√°ficas com uma chave p√∫blica (o endere√ßo do seu n√≥) e uma chave privada (seu segredo).</p>

      <div class="callout important">
        <div class="callout-title">‚ö†Ô∏è Importante</div>
        <p>Nunca reutilize chaves Nostr entre inst√¢ncias de Mostro. Cada n√≥ precisa de sua pr√≥pria identidade √∫nica.</p>
      </div>

      <p><strong>Gerando chaves Nostr seguras localmente com rana:</strong></p>
      <pre><code># Instalar Rust (se n√£o estiver instalado)
curl --proto '=https' --tlsv1.2 -sSf https://sh.rustup.rs | sh
source ~/.cargo/env

# Instalar rana - gerador local de chaves Nostr
cargo install rana

# Gerar um novo par de chaves (com frase seed de 12 palavras)
rana --generate 12</code></pre>

      <p>O Rana gerar√° sua chave privada (nsec), chave p√∫blica (npub) e uma frase seed de backup. <strong>Guarde tudo com seguran√ßa!</strong> Nota: executar <code>rana</code> sem argumentos inicia minera√ß√£o PoW (dificuldade 10) que pode levar minutos ‚Äî use <code>--generate</code> para gera√ß√£o instant√¢nea. Nunca gere chaves importantes usando servi√ßos online.</p>

      <h3 id="skill-level">2.5 N√≠vel de conhecimento t√©cnico</h3>

      <table class="guide-table">
        <thead><tr><th>Tarefa</th><th>Dificuldade</th><th>Conhecimentos necess√°rios</th></tr></thead>
        <tbody>
          <tr><td>Alugar um VPS</td><td><span class="badge badge-easy">F√°cil</span></td><td>Cart√£o de cr√©dito, navega√ß√£o web b√°sica</td></tr>
          <tr><td>Conectar via SSH</td><td><span class="badge badge-easy">F√°cil</span></td><td>Seguir instru√ß√µes, digitar comandos</td></tr>
          <tr><td>Instalar Docker</td><td><span class="badge badge-medium">M√©dio</span></td><td>Copiar e colar comandos, resolu√ß√£o b√°sica de problemas</td></tr>
          <tr><td>Executar Mostro (Docker)</td><td><span class="badge badge-medium">M√©dio</span></td><td>Editar arquivos de configura√ß√£o, entender caminhos</td></tr>
          <tr><td>Executar Mostro (nativo)</td><td><span class="badge badge-hard">Dif√≠cil</span></td><td>Administra√ß√£o Linux, compila√ß√£o de software, systemd</td></tr>
          <tr><td>Configurar LND do zero</td><td><span class="badge badge-hard">Dif√≠cil</span></td><td>Conhecimento significativo de Linux e redes</td></tr>
          <tr><td>Gerenciar liquidez Lightning</td><td><span class="badge badge-hard">Dif√≠cil</span></td><td>Entender a economia de canais Lightning</td></tr>
        </tbody>
      </table>

      <p><strong>üí° Nossa recomenda√ß√£o:</strong> Se sua comunidade tem algu√©m confort√°vel com a linha de comando Linux, essa pessoa pode lidar com a instala√ß√£o Docker. A compila√ß√£o nativa requer experi√™ncia em administra√ß√£o de sistemas. A configura√ß√£o do n√≥ Lightning √© a parte mais complexa ‚Äî considere pedir ajuda a algu√©m experiente, ou usar uma solu√ß√£o n√≥-em-caixa.</p>

      <!-- ===== SECTION 3 ===== -->
      <h2 id="setup">3. Instala√ß√£o Passo a Passo</h2>

      <p>Todas as op√ß√µes de instala√ß√£o compartilham os mesmos primeiros passos. Depois escolha a op√ß√£o que preferir:</p>
      <ul>
        <li><strong>Op√ß√£o A (Docker Hub):</strong> A mais r√°pida. Sem compilar, sem clonar. <strong>Recomendada para a maioria.</strong></li>
        <li><strong>Op√ß√£o B (Docker Build):</strong> Construa a imagem localmente a partir do reposit√≥rio.</li>
        <li><strong>Op√ß√£o C (Compila√ß√£o nativa):</strong> Mais controle, melhor para sysadmins experientes.</li>
      </ul>

      <p>Todas assumem que voc√™ j√° tem: ‚úÖ Um VPS com Ubuntu ¬∑ ‚úÖ Acesso SSH ¬∑ ‚úÖ Um n√≥ LND funcionando.</p>

      <h3 id="common-steps">Passos Comuns (para as 3 op√ß√µes)</h3>

      <h4>Passo 1: Conecte-se ao seu VPS</h4>
      <pre><code>ssh root@SEU_ENDERECO_IP_DO_VPS</code></pre>

      <h4>Passo 2: Atualize o sistema</h4>
      <pre><code># Baixar as informa√ß√µes mais recentes dos pacotes
apt update

# Instalar todas as atualiza√ß√µes dispon√≠veis
apt upgrade -y</code></pre>

      <h4>Passo 3: Instalar Docker e Docker Compose</h4>
      <div class="callout tip">
        <div class="callout-title">üí° Nota</div>
        <p>Docker √© necess√°rio para as op√ß√µes A e B. Se for compilar manualmente (Op√ß√£o C), pode pular este passo.</p>
      </div>
      <pre><code># Instalar Docker com o script oficial
curl -fsSL https://get.docker.com | sh

# Verificar se Docker est√° instalado
docker --version

# Verificar Docker Compose
docker compose version</code></pre>

      <h4>Passo 4: Instalar ferramentas adicionais</h4>
      <pre><code>apt install -y git make</code></pre>

      <p>‚úÖ <strong>Passos comuns conclu√≠dos.</strong> Agora escolha sua op√ß√£o de instala√ß√£o:</p>

      <h3 id="option-a">Op√ß√£o A: Docker Hub (A mais r√°pida ‚Äî Recomendada)</h3>
      <p>Execute o Mostro diretamente do Docker Hub sem clonar o reposit√≥rio ou compilar. Perfeito para deployments em VPS.</p>

      <h4>Passo 5: Criar diret√≥rio de configura√ß√£o</h4>
      <pre><code>mkdir -p ~/mostro-config/lnd</code></pre>

      <h4>Passo 6: Obter o template de configura√ß√£o</h4>
      <pre><code>curl -sL https://raw.githubusercontent.com/MostroP2P/mostro/v0.16.3/settings.tpl.toml \
  -o ~/mostro-config/settings.toml</code></pre>

      <h4>Passo 7: Copiar credenciais LND</h4>
      <pre><code>cp /caminho/para/seu/tls.cert ~/mostro-config/lnd/tls.cert
cp /caminho/para/seu/admin.macaroon ~/mostro-config/lnd/admin.macaroon</code></pre>

      <p>Se o LND est√° na <strong>mesma m√°quina</strong>, os caminhos t√≠picos s√£o:</p>
      <ul>
        <li><code>/root/.lnd/tls.cert</code></li>
        <li><code>/root/.lnd/data/chain/bitcoin/mainnet/admin.macaroon</code></li>
      </ul>

      <h4>Passo 8: Editar a configura√ß√£o</h4>
      <pre><code>nano ~/mostro-config/settings.toml</code></pre>

      <p><strong>Altera√ß√µes necess√°rias:</strong></p>
      <pre><code>[lightning]
lnd_cert_file = '/config/lnd/tls.cert'
lnd_macaroon_file = '/config/lnd/admin.macaroon'
lnd_grpc_host = 'https://host.docker.internal:10009'  # Se LND no mesmo VPS
# Ou usar 'https://SEU_IP_LND:10009' se LND em servidor diferente

[database]
url = "sqlite:///config/mostro.db"

[nostr]
nsec_privkey = 'SUA_CHAVE_NSEC_AQUI'
relays = ['wss://relay.mostro.network', 'wss://nos.lol']

[mostro]
fee = 0.006                    # 0,6% taxa por opera√ß√£o
max_order_amount = 1000000     # Ordem m√°xima em sats
min_payment_amount = 100       # Ordem m√≠nima em sats
fiat_currencies_accepted = ['USD', 'BRL']  # Suas moedas</code></pre>

      <p>Salvar: <code>Ctrl+X</code>, depois <code>Y</code>, depois <code>Enter</code>.</p>

      <h4>Passo 9: Ajustar permiss√µes</h4>
      <div class="callout important">
        <div class="callout-title">‚ö†Ô∏è Importante</div>
        <p>Evite <code>chmod 777</code>. Use permiss√µes m√≠nimas.</p>
      </div>
      <pre><code>sudo chown -R 1000:1000 ~/mostro-config
chmod 700 ~/mostro-config
chmod 600 ~/mostro-config/settings.toml
chmod 600 ~/mostro-config/lnd/admin.macaroon</code></pre>

      <h4>Passo 10: Executar o container</h4>
      <p><strong>Se o LND est√° no mesmo VPS:</strong></p>
      <pre><code>docker run -d --name mostro \
  --restart unless-stopped \
  --add-host=host.docker.internal:host-gateway \
  -v ~/mostro-config:/config \
  mostrop2p/mostro:v0.16.3</code></pre>

      <p><strong>Se o LND est√° em um servidor diferente:</strong></p>
      <pre><code>docker run -d --name mostro \
  --restart unless-stopped \
  -v ~/mostro-config:/config \
  mostrop2p/mostro:v0.16.3</code></pre>

      <h4>Passo 11: Verificar os logs</h4>
      <pre><code>docker logs -f mostro</code></pre>

      <p>Procure estas mensagens:</p>
      <ul>
        <li><code>Settings correctly loaded</code> ‚Äî A configura√ß√£o √© v√°lida</li>
        <li><code>Connected to LND</code> ‚Äî Conex√£o Lightning bem-sucedida</li>
        <li><code>Connected to relay</code> ‚Äî Relay Nostr estabelecido</li>
      </ul>

      <div class="callout tip">
        <div class="callout-title">üí° Solu√ß√£o de problemas</div>
        <p>Se aparecer <code>Permission denied (os error 13)</code>, reaplique as permiss√µes: <code>chown -R 1000:1000 ~/mostro-config</code> e reinicie: <code>docker restart mostro</code>.</p>
      </div>

      <p>üéâ <strong>Parab√©ns!</strong> Se vir conex√µes bem-sucedidas nos logs, seu n√≥ Mostro est√° funcionando!</p>

      <h4>Atualiza√ß√£o (Docker Hub)</h4>
      <pre><code>export MOSTRO_TAG=v0.16.3
docker pull mostrop2p/mostro:$MOSTRO_TAG
docker stop mostro
docker rm mostro
docker run -d --name mostro \
  --restart unless-stopped \
  --add-host=host.docker.internal:host-gateway \
  -v ~/mostro-config:/config \
  mostrop2p/mostro:$MOSTRO_TAG</code></pre>

      <div class="callout security">
        <div class="callout-title">üîí Nota de Seguran√ßa</div>
        <p>Use sempre uma tag de vers√£o espec√≠fica (ex: <code>mostrop2p/mostro:v0.16.3</code>) em vez de <code>:latest</code> para controlar os deployments.</p>
      </div>

      <h3 id="option-b">Op√ß√£o B: Docker Build (Construir imagem localmente)</h3>

      <h4>Passo 5: Baixar Mostro</h4>
      <pre><code>cd /opt
git clone https://github.com/MostroP2P/mostro.git
cd mostro</code></pre>

      <h4>Passo 6: Configurar arquivos</h4>
      <pre><code>cd docker
mkdir -p config
cp ../settings.tpl.toml config/settings.toml</code></pre>

      <h4>Passo 7: Editar o arquivo de configura√ß√£o</h4>
      <pre><code>nano config/settings.toml</code></pre>
      <p>Edite as mesmas configura√ß√µes da Op√ß√£o A, Passo 8.</p>

      <h4>Passo 8: Construir a imagem Docker</h4>
      <pre><code>cd ..
LND_CERT_FILE=/root/.lnd/tls.cert \
LND_MACAROON_FILE=/root/.lnd/data/chain/bitcoin/mainnet/admin.macaroon \
make docker-build</code></pre>

      <h4>Passo 9: Configurar senha do banco de dados (Opcional)</h4>
      <pre><code># Criar arquivo docker/.env
echo "MOSTRO_DB_PASSWORD='SuaSenhaForte'" > docker/.env</code></pre>

      <h4>Passo 10: Iniciar Mostro</h4>
      <pre><code>make docker-up

# Verificar
docker compose -f docker/compose.yml ps

# Ver logs
docker compose -f docker/compose.yml logs -f mostro</code></pre>

      <p>üéâ <strong>Parab√©ns!</strong> Se vir conex√µes bem-sucedidas, seu n√≥ Mostro est√° funcionando!</p>

      <h3 id="option-c">Op√ß√£o C: Compila√ß√£o Nativa (Para operadores t√©cnicos)</h3>

      <h4>Passo 5: Instalar Rust</h4>
      <pre><code>curl --proto '=https' --tlsv1.2 -sSf https://sh.rustup.rs | sh
source /root/.cargo/env
rustc --version
cargo --version</code></pre>

      <div class="callout important">
        <div class="callout-title">‚ö†Ô∏è Importante</div>
        <p>N√ÉO instale Rust via <code>apt install rustc</code>. Sempre use <code>rustup</code>. O pacote do sistema geralmente est√° desatualizado.</p>
      </div>

      <h4>Passo 6: Instalar depend√™ncias de compila√ß√£o</h4>
      <pre><code>apt install -y cmake build-essential libsqlite3-dev libssl-dev \
  pkg-config git sqlite3 protobuf-compiler</code></pre>

      <h4>Passo 7: Baixar e compilar Mostro</h4>
      <pre><code>cd /opt
git clone https://github.com/MostroP2P/mostro.git
cd mostro
cargo build --release</code></pre>

      <div class="callout tip">
        <div class="callout-title">üí° Dica</div>
        <p>Se a compila√ß√£o falhar por falta de RAM, adicione espa√ßo swap:</p>
      </div>
      <pre><code>fallocate -l 2G /swapfile
chmod 600 /swapfile
mkswap /swapfile
swapon /swapfile</code></pre>

      <h4>Passos 8‚Äì10: Instalar, inicializar e limpar</h4>
      <pre><code>install target/release/mostrod /usr/local/bin
cargo install sqlx-cli --version 0.6.3
./init_db.sh
cargo clean  # Economiza 2+ GB de espa√ßo</code></pre>

      <h4>Passos 11‚Äì12: Criar usu√°rio e configurar</h4>
      <pre><code>adduser --disabled-login mostro
mkdir -p /opt/mostro
cp settings.tpl.toml /opt/mostro/settings.toml
nano /opt/mostro/settings.toml</code></pre>
      <p>Edite as mesmas configura√ß√µes da Op√ß√£o A, Passo 8.</p>

      <h4>Passos 13‚Äì15: Teste, permiss√µes e servi√ßo systemd</h4>
      <pre><code># Teste de execu√ß√£o
/usr/local/bin/mostrod -d /opt/mostro

# Definir permiss√µes
chown -R mostro:mostro /opt/mostro</code></pre>

      <p>Criar o servi√ßo systemd:</p>
      <pre><code># /etc/systemd/system/mostro.service
[Unit]
Description=Mostro daemon
After=network.target

[Service]
Type=simple
User=mostro
WorkingDirectory=/home/mostro
Environment=RUST_LOG=info
ExecStart=/usr/local/bin/mostrod -d /opt/mostro
Restart=on-failure

[Install]
WantedBy=multi-user.target</code></pre>

      <pre><code>systemctl daemon-reload
systemctl enable mostro.service
systemctl start mostro.service
systemctl status mostro.service</code></pre>

      <p>üéâ <strong>Parab√©ns!</strong> Seu n√≥ Mostro est√° executando como servi√ßo do sistema.</p>

      <!-- ===== SECTION 4 ===== -->
      <h2 id="configuration">4. Configura√ß√£o em Detalhe</h2>

      <p>O arquivo <code>settings.toml</code> controla tudo sobre seu n√≥ Mostro.</p>

      <h3 id="cfg-nostr">4.1 Chaves Nostr ‚Äî A identidade do seu n√≥</h3>
      <pre><code>[nostr]
nsec_privkey = 'SUA_CHAVE_NSEC'
relays = [
  'wss://relay.mostro.network',
  'wss://nos.lol',
  'wss://relay.nostr.band'
]</code></pre>

      <p><strong>Quais relays usar?</strong></p>
      <ul>
        <li><code>wss://relay.mostro.network</code> ‚Äî Relay pr√≥prio do Mostro, recomendado</li>
        <li><code>wss://nos.lol</code> ‚Äî Relay confi√°vel e bem conectado</li>
        <li>Adicione 3‚Äì5 relays para confiabilidade. Mais relays = melhor disponibilidade mas mais largura de banda.</li>
      </ul>

      <div class="callout tip">
        <div class="callout-title">üí° Dica</div>
        <p>Voc√™ tamb√©m pode executar seu pr√≥prio relay Nostr junto com o Mostro (a instala√ß√£o Docker inclui um por padr√£o).</p>
      </div>

      <h3 id="fees">4.2 Taxas ‚Äî Como voc√™ gera receita</h3>
      <pre><code>[mostro]
fee = 0.006
dev_fee_percentage = 0.30</code></pre>

      <p><strong>Taxa de trading</strong> (<code>fee</code>): Percentual cobrado por opera√ß√£o, dividido entre comprador e vendedor.</p>
      <ul>
        <li><code>0.006</code> = 0,6% (cada parte paga 0,3%)</li>
        <li><code>0.01</code> = 1,0% (cada parte paga 0,5%)</li>
        <li><code>0</code> = gr√°tis (bom para fazer crescer sua base de usu√°rios)</li>
      </ul>

      <p><strong>Exemplo:</strong> Em uma opera√ß√£o de 100.000 sats com <code>fee = 0.006</code>: O comprador paga 300 sats, o vendedor paga 300 sats, seu n√≥ ganha 600 sats no total.</p>

      <p><strong>Taxa de desenvolvimento</strong> (<code>dev_fee_percentage</code>): Um percentual dos <em>seus</em> ganhos de taxas que vai para o desenvolvimento do Mostro.</p>
      <ul>
        <li><code>0.30</code> = 30% (padr√£o) ‚Äî de 600 sats, 180 v√£o para o fundo de desenvolvimento</li>
        <li>M√≠nimo: 10% (<code>0.10</code>), M√°ximo: 100% (<code>1.0</code>)</li>
        <li>Paga pelo seu n√≥ dos seus ganhos, n√£o cobrada dos usu√°rios</li>
        <li>Todos os pagamentos audit√°veis publicamente via eventos Nostr (kind 8383)</li>
      </ul>

      <div class="callout important">
        <div class="callout-title">üìù Nota</div>
        <p>Definir <code>dev_fee_percentage</code> abaixo de <code>0.10</code> impedir√° o Mostro de iniciar. Este m√≠nimo garante financiamento sustent√°vel do desenvolvimento.</p>
      </div>

      <h3 id="limits">4.3 Limites de ordens e moedas</h3>
      <pre><code>[mostro]
max_order_amount = 1000000
min_payment_amount = 100
fiat_currencies_accepted = ['USD', 'BRL', 'ARS', 'CUP']</code></pre>

      <ul>
        <li><strong><code>max_order_amount</code>:</strong> Maior opera√ß√£o em satoshis. Configure baseado na capacidade dos seus canais Lightning.</li>
        <li><strong><code>min_payment_amount</code>:</strong> Opera√ß√£o m√≠nima em satoshis. 1.000 ou 10.000 √© mais pr√°tico que 100.</li>
        <li><strong><code>fiat_currencies_accepted</code>:</strong> Use <a href="https://en.wikipedia.org/wiki/ISO_4217" target="_blank" rel="noopener noreferrer">c√≥digos ISO 4217</a>. Array vazio <code>[]</code> aceita todas as moedas.</li>
      </ul>

      <h3 id="profile">4.4 Perfil do n√≥ (Opcional mas recomendado)</h3>
      <pre><code>[mostro]
name = "Brasil Mostro"
about = "Exchange P2P de Bitcoin para o Brasil. Suporte em portugu√™s."
picture = "https://exemplo.com/seu-logo.png"
website = "https://site-da-sua-comunidade.com"</code></pre>

      <p>Estes configuram o perfil do seu Mostro no Nostr (NIP-01 kind 0 metadata). Os clientes exibem essas informa√ß√µes para que os usu√°rios saibam em qual Mostro est√£o operando.</p>

      <h3 id="timeouts">4.5 Tempos e expira√ß√£o</h3>
      <pre><code>[mostro]
expiration_hours = 24        # Quanto tempo uma ordem fica aberta
expiration_seconds = 900     # Tempo para completar (15 min)
hold_invoice_expiration_window = 300  # Validade da hold invoice (5 min)</code></pre>

      <h3 id="antispam">4.6 Anti-Spam</h3>
      <pre><code>[mostro]
pow = 0  # 0 = desabilitado; 10-20 = moderado. Comece com 0.</code></pre>

      <h3 id="rpc">4.7 Interface RPC Admin (Opcional)</h3>
      <pre><code>[rpc]
enabled = false
listen_address = "127.0.0.1"
port = 50051</code></pre>

      <p>Habilite para ferramentas de administra√ß√£o como MostriX (interface de terminal) para resolu√ß√£o de disputas.</p>

      <div class="callout important">
        <div class="callout-title">‚ö†Ô∏è Seguran√ßa</div>
        <p>Se habilitar RPC, mantenha <code>listen_address</code> como <code>"127.0.0.1"</code> (apenas localhost). Nunca exponha isso √† internet.</p>
      </div>

      <!-- ===== SECTION 5 ===== -->
      <h2 id="operating">5. Operando Seu N√≥ Mostro</h2>

      <h3 id="disputes">5.1 Como funcionam as disputas</h3>
      <p>Disputas s√£o sua responsabilidade operacional mais importante.</p>

      <p><strong>Quando ocorrem disputas?</strong></p>
      <ul>
        <li>O comprador diz que pagou, o vendedor diz que n√£o recebeu</li>
        <li>O vendedor se recusa a liberar os Bitcoin ap√≥s receber o pagamento</li>
        <li>Uma das partes deixa de responder</li>
      </ul>

      <p><strong>O processo de disputa:</strong></p>
      <ol>
        <li><strong>O usu√°rio abre uma disputa</strong> ‚Äî Uma das partes clica "Disputa" no cliente</li>
        <li><strong>Mostro marca a ordem</strong> ‚Äî O status muda para "Disputa", os fundos permanecem bloqueados</li>
        <li><strong>O √°rbitro assume o caso</strong> ‚Äî Um admin designado ao seu n√≥ investiga</li>
        <li><strong>Investiga√ß√£o</strong> ‚Äî Comunica-se com ambas as partes, solicita provas</li>
        <li><strong>Resolu√ß√£o</strong> ‚Äî O √°rbitro decide: liberar ao comprador, ou devolver ao vendedor</li>
      </ol>

      <div class="callout important">
        <div class="callout-title">‚ö†Ô∏è Importante</div>
        <p>Escolha seus √°rbitros com cuidado. Eles t√™m o poder de decidir para onde v√£o os fundos bloqueados. Escolha membros confi√°veis e imparciais da comunidade. Recomenda-se 2-3 √°rbitros.</p>
      </div>

      <h3 id="mostrix">5.2 Mostrix ‚Äî Sua ferramenta de administra√ß√£o</h3>
      <p>Mostrix √© um cliente baseado em terminal (TUI) para resolu√ß√£o de disputas. Se voc√™ executa um n√≥ Mostro, precisa do Mostrix.</p>

      <pre><code># Instalar depend√™ncias
sudo apt install -y cmake build-essential pkg-config

# Clonar e compilar
git clone https://github.com/MostroP2P/mostrix.git
cd mostrix
cargo build --release
cargo run</code></pre>

      <p>Configurar Mostrix em modo admin em <code>~/.mostrix/settings.toml</code>:</p>
      <pre><code>mostro_pubkey = "SUA_PUBKEY_MOSTRO_HEX"
nsec_privkey = "nsec1sua_chave_pessoal"
admin_privkey = "nsec1sua_chave_admin"
relays = ["wss://relay.mostro.network", "wss://nos.lol"]
currencies = ["USD", "BRL", "ARS"]
user_mode = "admin"</code></pre>

      <h3 id="watchdog">5.3 mostro-watchdog ‚Äî Notifica√ß√µes de disputas no Telegram</h3>
      <p><code>mostro-watchdog</code> monitora seu n√≥ Mostro para disputas e envia alertas instant√¢neos via Telegram. Essencial para tempos de resposta r√°pidos.</p>

      <pre><code>git clone https://github.com/MostroP2P/mostro-watchdog.git
cd mostro-watchdog
cargo build --release
cp config.example.toml config.toml
nano config.toml</code></pre>

      <pre><code>[mostro]
pubkey = "SUA_PUBKEY_MOSTRO"

[nostr]
relays = ["wss://relay.mostro.network", "wss://nos.lol"]

[telegram]
bot_token = "SEU_BOT_TOKEN"
chat_id = "SEU_CHAT_ID"</code></pre>

      <div class="callout tip">
        <div class="callout-title">üí° Dica</div>
        <p>Execute <code>mostro-watchdog</code> como servi√ßo systemd junto ao seu n√≥ Mostro para monitoramento 24/7.</p>
      </div>

      <h3 id="monitoring">5.4 Monitoramento de uptime</h3>

      <p>Seu n√≥ precisa estar funcionando 24/7.</p>

      <pre><code># Nativo
systemctl status mostro.service
journalctl -u mostro -f
journalctl -u mostro | grep -E "(error|warn|connected)" --ignore-case

# Docker Hub (Op√ß√£o A)
docker ps --filter name=mostro
docker logs -f mostro

# Docker Build (Op√ß√£o B)
docker compose -f /opt/mostro/docker/compose.yml ps
docker compose -f /opt/mostro/docker/compose.yml logs -f mostro</code></pre>

      <div class="callout tip">
        <div class="callout-title">üí° Dica pro</div>
        <p>Configure um monitor de uptime simples usando <a href="https://uptimerobot.com/" target="_blank" rel="noopener noreferrer">UptimeRobot</a> (n√≠vel gratuito) ou um cron job que te alerte se o Mostro cair.</p>
      </div>

      <h3 id="updating">5.5 Atualizando Mostro</h3>

      <p><strong>Docker Hub:</strong></p>
      <pre><code>export MOSTRO_TAG=v0.16.3
docker stop mostro
docker rm mostro
docker pull mostrop2p/mostro:$MOSTRO_TAG
docker run -d --name mostro \
  --restart unless-stopped \
  --add-host=host.docker.internal:host-gateway \
  -v ~/mostro-config:/config \
  mostrop2p/mostro:$MOSTRO_TAG</code></pre>

      <p><strong>Docker Build:</strong></p>
      <pre><code>cd /opt/mostro
git pull origin main
make docker-build
make docker-down
make docker-up</code></pre>

      <p><strong>Nativo:</strong></p>
      <pre><code>cd /opt/mostro
git pull origin main
cargo build --release
install target/release/mostrod /usr/local/bin
cargo clean
cargo install sqlx-cli --version 0.6.3
sqlx migrate run
systemctl restart mostro.service</code></pre>

      <div class="callout tip">
        <div class="callout-title">üí° Dica</div>
        <p>Sempre fa√ßa backup do banco de dados antes de atualizar.</p>
      </div>

      <h3 id="backups">5.6 Backups</h3>

      <p>Arquivos cr√≠ticos para backup: <code>settings.toml</code> (cont√©m sua chave privada Nostr!) e <code>mostro.db</code> (hist√≥rico de ordens, reputa√ß√£o).</p>

      <pre><code># Backup manual ‚Äî Docker Hub:
mkdir -p /root/mostro-backups
cp ~/mostro-config/settings.toml /root/mostro-backups/settings.toml.$(date +%Y%m%d)
cp ~/mostro-config/mostro.db /root/mostro-backups/mostro.db.$(date +%Y%m%d)

# Backup manual ‚Äî Nativo:
cp /opt/mostro/settings.toml /root/mostro-backups/settings.toml.$(date +%Y%m%d)
cp /opt/mostro/mostro.db /root/mostro-backups/mostro.db.$(date +%Y%m%d)</code></pre>

      <p><strong>Backup di√°rio automatizado</strong> (adicionar ao crontab com <code>crontab -e</code>):</p>
      <pre><code># Docker Hub (Op√ß√£o A):
0 3 * * * mkdir -p /root/mostro-backups && cp ~/mostro-config/mostro.db /root/mostro-backups/mostro.db.$(date +\%Y\%m\%d) && cp ~/mostro-config/settings.toml /root/mostro-backups/settings.toml.$(date +\%Y\%m\%d)

# Nativo (Op√ß√£o C) / Docker Build (Op√ß√£o B):
0 3 * * * mkdir -p /root/mostro-backups && cp /opt/mostro/mostro.db /root/mostro-backups/mostro.db.$(date +\%Y\%m\%d) && cp /opt/mostro/settings.toml /root/mostro-backups/settings.toml.$(date +\%Y\%m\%d)</code></pre>

      <div class="callout important">
        <div class="callout-title">‚ö†Ô∏è Cr√≠tico</div>
        <p>Sua <code>nsec_privkey</code> no <code>settings.toml</code> √â a identidade do seu n√≥. Se perd√™-la, perde sua reputa√ß√£o e todos os usu√°rios devem reconectar-se a uma nova identidade. <strong>Guarde uma c√≥pia offline.</strong></p>
      </div>

      <h3 id="activity">5.7 Revisando a atividade de opera√ß√µes</h3>

      <pre><code># Contar todas as ordens
sqlite3 /caminho/para/mostro.db "SELECT COUNT(*) FROM orders;"

# Opera√ß√µes bem-sucedidas recentes
sqlite3 /caminho/para/mostro.db "SELECT id, fiat_code, fiat_amount, amount, fee, status, created_at FROM orders WHERE status = 'success' ORDER BY created_at DESC LIMIT 10;"

# Ordens pendentes
sqlite3 /caminho/para/mostro.db "SELECT id, fiat_code, fiat_amount, status, created_at FROM orders WHERE status = 'pending';"

# Receita total de taxas (taxa do n√≥ + dev_fee)
sqlite3 /caminho/para/mostro.db "SELECT SUM(fee) as node_fees, SUM(dev_fee) as dev_fees, SUM(fee + dev_fee) as total_fees_sats FROM orders WHERE status = 'success';"</code></pre>

      <!-- ===== SECTION 6 ===== -->
      <h2 id="costs">6. An√°lise de Custos</h2>

      <h3>Custos operacionais mensais</h3>
      <table class="guide-table">
        <thead><tr><th>Item</th><th>Custo mensal</th><th>Notas</th></tr></thead>
        <tbody>
          <tr><td>VPS (servidor)</td><td>$10‚Äì24</td><td>Depende do provedor e especifica√ß√µes</td></tr>
          <tr><td>Nome de dom√≠nio (opcional)</td><td>$1‚Äì2</td><td>Para um site/identidade</td></tr>
          <tr><td>Taxas on-chain de canais Lightning</td><td>Vari√°vel</td><td>Abertura/fechamento de canais</td></tr>
          <tr><td><strong>Total mensal</strong></td><td><strong>$11‚Äì26</strong></td><td>Excluindo liquidez Lightning</td></tr>
        </tbody>
      </table>

      <h3>Custos √∫nicos / de capital</h3>
      <table class="guide-table">
        <thead><tr><th>Item</th><th>Custo</th><th>Notas</th></tr></thead>
        <tbody>
          <tr><td>Liquidez Lightning</td><td>0,01‚Äì1,0+ BTC</td><td>Bloqueado em canais; recuperado ao fechar</td></tr>
          <tr><td>Hardware do n√≥ (se auto-hospedado)</td><td>$0‚Äì600</td><td>Gr√°tis se usar VPS; $300-600 para Start9/Umbrel</td></tr>
          <tr><td>Tempo de configura√ß√£o</td><td>4‚Äì16 horas</td><td>Dependendo do n√≠vel de experi√™ncia</td></tr>
        </tbody>
      </table>

      <h3>Potencial de receita</h3>
      <table class="guide-table">
        <thead><tr><th>Volume mensal</th><th>Taxa (0,6%)</th><th>Taxa dev (30%)</th><th>Sua receita l√≠quida</th></tr></thead>
        <tbody>
          <tr><td>$1.000</td><td>~$6</td><td>~$1,80</td><td>~$4,20</td></tr>
          <tr><td>$10.000</td><td>~$60</td><td>~$18</td><td>~$42</td></tr>
          <tr><td>$50.000</td><td>~$300</td><td>~$90</td><td>~$210</td></tr>
          <tr><td>$100.000</td><td>~$600</td><td>~$180</td><td>~$420</td></tr>
        </tbody>
      </table>

      <div class="callout important">
        <div class="callout-title">üìù Realidade</div>
        <p>A maioria dos n√≥s novos leva meses para construir volume de opera√ß√µes. N√£o espere lucratividade imediata. O valor real geralmente vem de fornecer um servi√ßo √† sua comunidade, com as taxas como b√¥nus.</p>
      </div>

      <h3>Compromisso de tempo</h3>
      <table class="guide-table">
        <thead><tr><th>Tarefa</th><th>Frequ√™ncia</th><th>Tempo</th></tr></thead>
        <tbody>
          <tr><td>Monitoramento (verificar logs, status)</td><td>Di√°rio</td><td>5‚Äì10 min</td></tr>
          <tr><td>Resolu√ß√£o de disputas</td><td>Conforme necess√°rio</td><td>15‚Äì60 min por disputa</td></tr>
          <tr><td>Atualiza√ß√µes</td><td>Mensal</td><td>15‚Äì30 min</td></tr>
          <tr><td>Gerenciamento de liquidez</td><td>Semanal</td><td>15‚Äì30 min</td></tr>
          <tr><td><strong>Estimativa semanal total</strong></td><td></td><td><strong>1‚Äì3 horas</strong></td></tr>
        </tbody>
      </table>

      <!-- ===== SECTION 7 ===== -->
      <h2 id="faq">7. Perguntas Frequentes</h2>

      <h3>Preciso ser desenvolvedor para executar um n√≥ Mostro?</h3>
      <p>N√£o, mas precisa se sentir confort√°vel com opera√ß√µes b√°sicas de linha de comando (digitar comandos, editar arquivos de texto). O caminho Docker (Op√ß√£o A) foi projetado para ser acess√≠vel.</p>

      <h3>Posso executar Mostro em um Raspberry Pi?</h3>
      <p>Tecnicamente sim (usando Start9 ou similar), mas n√£o √© recomendado para produ√ß√£o devido √†s limita√ß√µes de CPU e RAM. Um VPS √© mais confi√°vel.</p>

      <h3>Posso usar Core Lightning (CLN) em vez de LND?</h3>
      <p>N√£o. Mostro atualmente suporta apenas LND, porque depende da implementa√ß√£o espec√≠fica de hold invoices do LND. O suporte para outras implementa√ß√µes pode chegar no futuro.</p>

      <h3>Como os usu√°rios se conectam ao meu Mostro?</h3>
      <p>Os usu√°rios precisam de um app cliente Mostro (como Mostro Mobile ou mostro-cli) e da chave p√∫blica do seu Mostro (npub). Eles adicionam sua npub ao cliente, e o cliente se comunica atrav√©s dos relays Nostr. N√£o √© necess√°ria conex√£o direta.</p>

      <h3>Posso executar m√∫ltiplas inst√¢ncias de Mostro?</h3>
      <p>Sim, mas cada uma precisa de seu pr√≥prio par de chaves Nostr, n√≥ LND (ou pelo menos canais/liquidez separados), e configura√ß√£o.</p>

      <h3>√â legal?</h3>
      <p>Depende muito da sua jurisdi√ß√£o. Mostro √© software para trading peer-to-peer. Em algumas jurisdi√ß√µes, operar uma exchange P2P pode exigir licen√ßas. <strong>Verifique as regulamenta√ß√µes locais e procure assessoria jur√≠dica.</strong></p>

      <h3>Quanta largura de banda o Mostro usa?</h3>
      <p>Muito pouca ‚Äî principalmente pequenos eventos Nostr. Alguns GB por m√™s √© t√≠pico mesmo com volume moderado.</p>

      <h3>O que acontece se meu n√≥ ficar offline?</h3>
      <p>Ordens pendentes eventualmente expiram. Opera√ß√µes ativas com fundos bloqueados continuam quando voc√™ volta a ficar online. Se ficar offline por muito tempo, os usu√°rios podem perder a confian√ßa.</p>

      <h3>Posso mudar minha chave Nostr depois?</h3>
      <p>Pode, mas perder√° a identidade e reputa√ß√£o do seu n√≥. Os usu√°rios o ver√£o como um Mostro novo. Trate sua chave como sua identidade de marca.</p>

      <h3>Posso perder dinheiro executando um n√≥ Mostro?</h3>
      <p>Sim, √© poss√≠vel: os fundos dos canais Lightning podem estar em risco por bugs (raro); o fechamento for√ßado de canais durante per√≠odos de taxas altas pode ser custoso; os custos de VPS s√£o cont√≠nuos.</p>

      <h3>A liquidez Lightning est√° "em risco"?</h3>
      <p>Sua liquidez Lightning √© sua. N√£o est√° em risco pelo Mostro em si ‚Äî hold invoices s√£o bloqueios tempor√°rios. No entanto, aplicam-se os riscos padr√£o da Lightning Network (fechamentos for√ßados, canais travados, bugs).</p>

      <h3>Quando vou atingir o ponto de equil√≠brio?</h3>
      <p>Depende dos seus custos e volume de opera√ß√µes. Com $20/m√™s de custos e 0,6% de taxa, voc√™ precisa de ~$5.000/m√™s em opera√ß√µes para cobrir custos (antes da taxa de desenvolvimento). A maioria das comunidades leva 3‚Äì6 meses para construir volume significativo.</p>

      <!-- ===== SECTION 8 ===== -->
      <h2 id="security">8. Considera√ß√µes de Seguran√ßa</h2>

      <div class="callout important">
        <div class="callout-title">‚ö†Ô∏è Aviso de software em est√°gio inicial</div>
        <p><strong>Mostro est√° em est√°gio inicial de desenvolvimento.</strong> Embora a equipe trabalhe duro para garantir confiabilidade, pode haver bugs n√£o descobertos ‚Äî incluindo bugs de seguran√ßa que podem resultar em perda de fundos. <strong>Os desenvolvedores n√£o s√£o respons√°veis por qualquer perda de dinheiro devido a bugs de software.</strong></p>
        <p>Mostro √© open-source e seu c√≥digo est√° aberto para auditorias. Encorajamos as comunidades a promover e financiar auditorias de seguran√ßa independentes.</p>
        <p>Dito isso, <strong>o mecanismo central de cust√≥dia usando hold invoices Lightning tem sido testado em batalha desde 2021</strong>, quando o @lnp2pBot implementou pela primeira vez esse tipo de cust√≥dia. Milhares de opera√ß√µes foram conclu√≠das com sucesso.</p>
      </div>

      <h3>Operando sob regimes autorit√°rios</h3>

      <p>Se voc√™ opera em um pa√≠s com governo autorit√°rio, <strong>privacidade n√£o √© opcional ‚Äî √© um requisito de seguran√ßa.</strong></p>

      <ol>
        <li><strong>Execute seu n√≥ Mostro atr√°s de Tor e/ou uma VPN.</strong> Isso oculta o IP do seu servidor dos relays Nostr.</li>
        <li><strong>Se Tor/VPN n√£o √© poss√≠vel</strong> (comum em pa√≠ses em desenvolvimento com internet lenta), <strong>publique eventos apenas em relays que voc√™ possui ou confia.</strong></li>
        <li><strong>Tenha muito cuidado com quais relays voc√™ usa.</strong> No futuro, governos podem criar relays Nostr especificamente para coletar endere√ßos IP.</li>
        <li><strong>Considere tamb√©m a privacidade do seu n√≥ Lightning.</strong> Executar LND atr√°s de Tor √© poss√≠vel e recomendado em ambientes sens√≠veis.</li>
      </ol>

      <div class="callout tip">
        <div class="callout-title">üí° Dica</div>
        <p>A beleza de o Mostro ser descentralizado √© que mesmo se um n√≥ for desligado, outros continuam funcionando. Mas a preven√ß√£o √© sempre melhor que a recupera√ß√£o. Leve a privacidade a s√©rio desde o primeiro dia.</p>
      </div>

      <!-- ===== SECTION 9 ===== -->
      <h2 id="troubleshooting">9. Solu√ß√£o de Problemas</h2>

      <h3>Mostro n√£o inicia</h3>

      <h4>"Configuration error: dev_fee_percentage below minimum"</h4>
      <p>Defina <code>dev_fee_percentage</code> em pelo menos <code>0.10</code> no settings.toml.</p>

      <h4>Arquivo de configura√ß√£o ou banco de dados n√£o encontrado</h4>
      <p>Certifique-se de que o flag <code>-d</code> aponte para o diret√≥rio contendo <code>settings.toml</code>. Para Docker Hub: verifique se <code>~/mostro-config/settings.toml</code> existe.</p>

      <h4>"Failed to connect to LND"</h4>
      <ul>
        <li>Verifique se o LND est√° executando: <code>lncli getinfo</code></li>
        <li>Confira se <code>lnd_grpc_host</code> corresponde ao endere√ßo do seu LND</li>
        <li>Verifique se os caminhos de <code>tls.cert</code> e <code>admin.macaroon</code> est√£o corretos</li>
        <li>Docker + LND no host: use <code>host.docker.internal</code></li>
      </ul>

      <h3>Problemas de conex√£o</h3>

      <h4>Mostro inicia mas n√£o conecta aos relays</h4>
      <ul>
        <li>Verifique as URLs dos relays (devem come√ßar com <code>wss://</code>)</li>
        <li>Certifique-se de que o firewall do seu VPS permite conex√µes de sa√≠da na porta 443</li>
        <li>Tente relays diferentes ‚Äî alguns podem estar temporariamente fora do ar</li>
      </ul>

      <h3>Problemas com opera√ß√µes</h3>

      <h4>Ordens n√£o aparecem nos clientes</h4>
      <ul>
        <li>Verifique as conex√µes com relays nos logs</li>
        <li>Certifique-se de que os clientes usem os mesmos relays que seu n√≥</li>
      </ul>

      <h4>Pagamentos falhando</h4>
      <ul>
        <li>Verifique a liquidez: <code>lncli listchannels</code></li>
        <li>Certifique-se de ter capacidade de sa√≠da suficiente</li>
        <li>Verifique a configura√ß√£o <code>max_routing_fee</code></li>
      </ul>

      <h3>Problemas de banco de dados</h3>

      <h4>Erros de banco de dados bloqueado</h4>
      <pre><code>ps aux | grep mostrod
# Se houver m√∫ltiplos processos, encerre os extras:
kill &lt;PID&gt;</code></pre>

      <h3>Obtendo ajuda</h3>

      <ol>
        <li><strong>Verifique os logs primeiro</strong> ‚Äî a maioria dos erros explica o que deu errado</li>
        <li><strong>Telegram (Desenvolvedores):</strong> <a href="https://t.me/mostro_dev" target="_blank" rel="noopener noreferrer">@mostro_dev</a></li>
        <li><strong>Telegram (Comunidade):</strong> <a href="https://t.me/MostroP2P" target="_blank" rel="noopener noreferrer">@MostroP2P</a></li>
        <li><strong>GitHub Issues:</strong> <a href="https://github.com/MostroP2P/mostro/issues" target="_blank" rel="noopener noreferrer">github.com/MostroP2P/mostro/issues</a></li>
        <li><strong>DeepWiki:</strong> <a href="https://deepwiki.com/MostroP2P/mostro" target="_blank" rel="noopener noreferrer">deepwiki.com/MostroP2P/mostro</a></li>
      </ol>

      <p>Ao pedir ajuda, sempre inclua: sua vers√£o do Mostro, a sa√≠da relevante dos logs, e o que j√° tentou.</p>

      <!-- ===== APPENDIX ===== -->
      <h2 id="appendix">Ap√™ndice: Refer√™ncia R√°pida</h2>

      <h3>Localiza√ß√µes importantes de arquivos</h3>
      <table class="guide-table">
        <thead><tr><th>Arquivo</th><th>Docker Hub</th><th>Nativo</th></tr></thead>
        <tbody>
          <tr><td>Configura√ß√£o</td><td><code>~/mostro-config/settings.toml</code></td><td><code>/opt/mostro/settings.toml</code></td></tr>
          <tr><td>Banco de dados</td><td><code>~/mostro-config/mostro.db</code></td><td><code>/opt/mostro/mostro.db</code></td></tr>
          <tr><td>Cert LND</td><td><code>~/mostro-config/lnd/tls.cert</code></td><td>Varia (verifique config LND)</td></tr>
          <tr><td>Macaroon LND</td><td><code>~/mostro-config/lnd/admin.macaroon</code></td><td>Varia (verifique config LND)</td></tr>
          <tr><td>Servi√ßo</td><td>N/A</td><td><code>/etc/systemd/system/mostro.service</code></td></tr>
          <tr><td>Logs</td><td><code>docker logs -f mostro</code></td><td><code>journalctl -u mostro</code></td></tr>
        </tbody>
      </table>

      <h3>Comandos essenciais</h3>
      <pre><code># Docker
docker logs -f mostro         # Ver logs
docker restart mostro          # Reiniciar
docker stop mostro             # Parar

# Nativo (systemd)
systemctl start mostro         # Iniciar
systemctl stop mostro          # Parar
systemctl restart mostro       # Reiniciar
systemctl status mostro        # Ver status
journalctl -u mostro -f        # Ver logs

# Banco de dados
sqlite3 mostro.db "SELECT COUNT(*) FROM orders;"                           # Total de ordens
sqlite3 mostro.db "SELECT COUNT(*) FROM orders WHERE status='success';"    # Opera√ß√µes bem-sucedidas
sqlite3 mostro.db "SELECT SUM(fee + dev_fee) FROM orders WHERE status='success';"  # Total de taxas</code></pre>

      <h3>Configura√ß√£o recomendada para n√≥s novos</h3>
      <pre><code>[mostro]
fee = 0.006
max_order_amount = 500000
min_payment_amount = 1000
expiration_hours = 24
expiration_seconds = 900
pow = 0
dev_fee_percentage = 0.30
fiat_currencies_accepted = ['BRL']  # Mude para sua moeda local

[nostr]
relays = [
  'wss://relay.mostro.network',
  'wss://nos.lol',
  'wss://relay.nostr.band'
]</code></pre>

      <div style="text-align:center; margin-top:48px; padding:24px; border-top:1px solid var(--border);">
        <p>Este guia √© mantido pela comunidade Mostro. Encontrou um erro ou quer melhor√°-lo?<br>
        Contribui√ß√µes s√£o bem-vindas em <a href="https://github.com/MostroP2P/community" target="_blank" rel="noopener noreferrer">github.com/MostroP2P/community</a></p>
        <p style="color:var(--text-secondary); margin-top:12px;">√öltima atualiza√ß√£o: Fevereiro 2026 ¬∑ Mostro v0.16.3</p>
      </div>
    </article>
  </div>

  <Footer locale={locale} />
</Layout>

<style>
  .flow-diagram {
    background: rgba(140, 198, 63, 0.05);
    border: 1px solid rgba(140, 198, 63, 0.2);
    border-radius: 12px;
    padding: 24px;
    margin: 20px 0;
    font-family: monospace;
  }
  .flow-step {
    padding: 8px 0;
    line-height: 1.6;
  }
  .step-num {
    color: var(--accent);
    font-weight: 700;
    font-size: 1.1rem;
  }
  .arrow {
    color: var(--accent);
    font-weight: 700;
  }
  .badge {
    display: inline-block;
    padding: 2px 10px;
    border-radius: 12px;
    font-size: 0.8rem;
    font-weight: 600;
  }
  .badge-easy {
    background: rgba(76, 175, 80, 0.15);
    color: #2E7D32;
  }
  .badge-medium {
    background: rgba(255, 193, 7, 0.15);
    color: #7B5800;
  }
  .badge-hard {
    background: rgba(244, 67, 54, 0.15);
    color: #B71C1C;
  }
</style>

<script>
  document.getElementById('toc-toggle')?.addEventListener('click', () => {
    document.getElementById('toc-mobile-list')?.classList.toggle('open');
  });
</script>
